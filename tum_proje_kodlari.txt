
============================================================
DOSYA YOLU: .gitignore
============================================================
node_modules/
.env
dist/
.angular/
.vscode/

============================================================
DOSYA YOLU: nerik_full_backup.sql
============================================================
-- --------------------------------------------------------
-- Sunucu:                       127.0.0.1
-- Sunucu s√ºr√ºm√º:                8.4.7 - MySQL Community Server - GPL
-- Sunucu ƒ∞≈ületim Sistemi:       Win64
-- HeidiSQL S√ºr√ºm:               12.14.0.7170
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;


-- nerik_db i√ßin veritabanƒ± yapƒ±sƒ± d√∂k√ºl√ºyor
CREATE DATABASE IF NOT EXISTS `nerik_db` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci */ /*!80016 DEFAULT ENCRYPTION='N' */;
USE `nerik_db`;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.ads
CREATE TABLE IF NOT EXISTS `ads` (
  `id` int NOT NULL AUTO_INCREMENT,
  `title` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `image_path` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `target_url` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `area` enum('header','sidebar','footer') COLLATE utf8mb4_unicode_ci DEFAULT 'sidebar',
  `is_active` tinyint(1) DEFAULT '1',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.ads: 0 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `ads` DISABLE KEYS */;
/*!40000 ALTER TABLE `ads` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.categories
CREATE TABLE IF NOT EXISTS `categories` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `slug` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `color` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT '#2563eb',
  PRIMARY KEY (`id`),
  UNIQUE KEY `slug` (`slug`)
) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.categories: 3 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `categories` DISABLE KEYS */;
INSERT INTO `categories` (`id`, `name`, `slug`, `color`) VALUES
	(1, 'G√ºndem', 'gundem', '#2563eb'),
	(2, 'Spor', 'spor', '#2563eb'),
	(3, 'Ekonomi', 'ekonomi', '#2563eb');
/*!40000 ALTER TABLE `categories` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.column_posts
CREATE TABLE IF NOT EXISTS `column_posts` (
  `id` int NOT NULL AUTO_INCREMENT,
  `columnist_id` int DEFAULT NULL,
  `title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `content` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `view_count` int DEFAULT '0',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `columnist_id` (`columnist_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.column_posts: 0 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `column_posts` DISABLE KEYS */;
/*!40000 ALTER TABLE `column_posts` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.columnists
CREATE TABLE IF NOT EXISTS `columnists` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `image_path` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.columnists: 0 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `columnists` DISABLE KEYS */;
/*!40000 ALTER TABLE `columnists` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.news
CREATE TABLE IF NOT EXISTS `news` (
  `id` int NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `slug` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `summary` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `content` longtext COLLATE utf8mb4_unicode_ci,
  `image_path` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `category_id` int DEFAULT NULL,
  `author_id` int DEFAULT NULL,
  `status` enum('draft','published','archived') COLLATE utf8mb4_unicode_ci DEFAULT 'draft',
  `view_count` int DEFAULT '0',
  `is_breaking` tinyint(1) DEFAULT '0',
  `is_slider` tinyint(1) DEFAULT '0',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `slug` (`slug`),
  KEY `category_id` (`category_id`),
  KEY `author_id` (`author_id`)
) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.news: 0 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `news` DISABLE KEYS */;
INSERT INTO `news` (`id`, `title`, `slug`, `summary`, `content`, `image_path`, `category_id`, `author_id`, `status`, `view_count`, `is_breaking`, `is_slider`, `created_at`, `updated_at`) VALUES
	(1, 'Deneme Haber', 'deneme-haber-1770577555973', NULL, '<h1 class="ql-align-center"><em><u>Haber</u></em></h1><h2 class="ql-align-center"><s>Haber</s></h2><p class="ql-align-center"></p><p>Sistem √áalƒ±≈üƒ±yor ƒ∞se Haber <strong>G√∂r√ºnt√ºlenecektir.</strong></p>', '/uploads/1770577555962.jpg', 1, 2, 'published', 7, 0, 0, '2026-02-08 18:07:34', '2026-02-08 20:21:46'),
	(3, 'Aziz Baytekini siktiler', 'aziz-baytekini-siktiler', NULL, '<p>Vezirk√∂pr√º KYK yurdunda 405 numaralƒ± odada kalan Aziz Baytekin, oda arkada≈üƒ± <strong>Yusuf Keski</strong> ve <strong>Ufuk Bildik</strong> tarafƒ±ndan Gangbang tecav√ºze uƒüradƒ±. Bu olaydan sonra Oturma ve y√ºr√ºme yetisini kaybeden aziz baytekin ≈üuanda sadece yatabiliyor.</p>', '/uploads/1770578141018.jpg', NULL, 2, 'published', 2, 1, 1, '2026-02-08 19:15:41', '2026-02-08 20:21:46');
/*!40000 ALTER TABLE `news` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.settings
CREATE TABLE IF NOT EXISTS `settings` (
  `setting_key` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `setting_value` longtext COLLATE utf8mb4_unicode_ci,
  PRIMARY KEY (`setting_key`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.settings: 0 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `settings` DISABLE KEYS */;
/*!40000 ALTER TABLE `settings` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.users
CREATE TABLE IF NOT EXISTS `users` (
  `id` int NOT NULL AUTO_INCREMENT,
  `username` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `password_hash` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `full_name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `role` enum('admin','editor','author') COLLATE utf8mb4_unicode_ci DEFAULT 'author',
  `permissions` json DEFAULT NULL,
  `is_active` tinyint(1) DEFAULT '1',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=MyISAM AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.users: 1 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `users` DISABLE KEYS */;
INSERT INTO `users` (`id`, `username`, `password_hash`, `full_name`, `role`, `permissions`, `is_active`, `created_at`) VALUES
	(2, 'admin', '$2b$10$vpgtTA51GVgFZZpKJgFwcODV8gjWEhTpmH/crgj70Wpj8yCCzHYJ2', 'Osman Bey', 'admin', '{"all": true}', 1, '2026-02-08 14:12:57');
/*!40000 ALTER TABLE `users` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.videos
CREATE TABLE IF NOT EXISTS `videos` (
  `id` int NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `url` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.videos: 0 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `videos` DISABLE KEYS */;
INSERT INTO `videos` (`id`, `title`, `url`, `created_at`) VALUES
	(1, 'asdasf', 'https://www.youtube.com/embed/aWMdUqyk3Ys&list=RDaWMdUqyk3Ys&start_radio=1', '2026-02-08 20:27:34'),
	(2, 'asdasd', 'https://www.youtube.com/embed/yr7mYngK1Xc', '2026-02-08 20:28:06');
/*!40000 ALTER TABLE `videos` ENABLE KEYS */;

/*!40103 SET TIME_ZONE=IFNULL(@OLD_TIME_ZONE, 'system') */;
/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IFNULL(@OLD_FOREIGN_KEY_CHECKS, 1) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40111 SET SQL_NOTES=IFNULL(@OLD_SQL_NOTES, 1) */;


============================================================
DOSYA YOLU: veritabanƒ± kodlarƒ±.txt
============================================================
-- --------------------------------------------------------
-- Sunucu:                       127.0.0.1
-- Sunucu s√ºr√ºm√º:                8.4.7 - MySQL Community Server - GPL
-- Sunucu ƒ∞≈ületim Sistemi:       Win64
-- HeidiSQL S√ºr√ºm:               12.14.0.7170
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;


-- nerik_db i√ßin veritabanƒ± yapƒ±sƒ± d√∂k√ºl√ºyor
CREATE DATABASE IF NOT EXISTS `nerik_db` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci */ /*!80016 DEFAULT ENCRYPTION='N' */;
USE `nerik_db`;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.ads
CREATE TABLE IF NOT EXISTS `ads` (
  `id` int NOT NULL AUTO_INCREMENT,
  `title` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `image_path` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `target_url` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `area` enum('header','sidebar','footer') COLLATE utf8mb4_unicode_ci DEFAULT 'sidebar',
  `is_active` tinyint(1) DEFAULT '1',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.ads: 0 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `ads` DISABLE KEYS */;
/*!40000 ALTER TABLE `ads` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.categories
CREATE TABLE IF NOT EXISTS `categories` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `slug` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `color` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT '#2563eb',
  PRIMARY KEY (`id`),
  UNIQUE KEY `slug` (`slug`)
) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.categories: 3 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `categories` DISABLE KEYS */;
INSERT INTO `categories` (`id`, `name`, `slug`, `color`) VALUES
	(1, 'G√ºndem', 'gundem', '#2563eb'),
	(2, 'Spor', 'spor', '#2563eb'),
	(3, 'Ekonomi', 'ekonomi', '#2563eb');
/*!40000 ALTER TABLE `categories` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.column_posts
CREATE TABLE IF NOT EXISTS `column_posts` (
  `id` int NOT NULL AUTO_INCREMENT,
  `columnist_id` int DEFAULT NULL,
  `title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `content` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `view_count` int DEFAULT '0',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `columnist_id` (`columnist_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.column_posts: 0 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `column_posts` DISABLE KEYS */;
/*!40000 ALTER TABLE `column_posts` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.columnists
CREATE TABLE IF NOT EXISTS `columnists` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `image_path` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.columnists: 0 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `columnists` DISABLE KEYS */;
/*!40000 ALTER TABLE `columnists` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.news
CREATE TABLE IF NOT EXISTS `news` (
  `id` int NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `slug` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
  `summary` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `content` longtext COLLATE utf8mb4_unicode_ci,
  `image_path` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `category_id` int DEFAULT NULL,
  `author_id` int DEFAULT NULL,
  `status` enum('draft','published','archived') COLLATE utf8mb4_unicode_ci DEFAULT 'draft',
  `view_count` int DEFAULT '0',
  `is_breaking` tinyint(1) DEFAULT '0',
  `is_slider` tinyint(1) DEFAULT '0',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `slug` (`slug`),
  KEY `category_id` (`category_id`),
  KEY `author_id` (`author_id`)
) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.news: 0 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `news` DISABLE KEYS */;
INSERT INTO `news` (`id`, `title`, `slug`, `summary`, `content`, `image_path`, `category_id`, `author_id`, `status`, `view_count`, `is_breaking`, `is_slider`, `created_at`, `updated_at`) VALUES
	(1, 'Deneme Haber', 'deneme-haber-1770577555973', NULL, '<h1 class="ql-align-center"><em><u>Haber</u></em></h1><h2 class="ql-align-center"><s>Haber</s></h2><p class="ql-align-center"></p><p>Sistem √áalƒ±≈üƒ±yor ƒ∞se Haber <strong>G√∂r√ºnt√ºlenecektir.</strong></p>', '/uploads/1770577555962.jpg', 1, 2, 'published', 7, 0, 0, '2026-02-08 18:07:34', '2026-02-08 20:21:46'),
	(3, 'Aziz Baytekini siktiler', 'aziz-baytekini-siktiler', NULL, '<p>Vezirk√∂pr√º KYK yurdunda 405 numaralƒ± odada kalan Aziz Baytekin, oda arkada≈üƒ± <strong>Yusuf Keski</strong> ve <strong>Ufuk Bildik</strong> tarafƒ±ndan Gangbang tecav√ºze uƒüradƒ±. Bu olaydan sonra Oturma ve y√ºr√ºme yetisini kaybeden aziz baytekin ≈üuanda sadece yatabiliyor.</p>', '/uploads/1770578141018.jpg', NULL, 2, 'published', 2, 1, 1, '2026-02-08 19:15:41', '2026-02-08 20:21:46');
/*!40000 ALTER TABLE `news` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.settings
CREATE TABLE IF NOT EXISTS `settings` (
  `setting_key` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `setting_value` longtext COLLATE utf8mb4_unicode_ci,
  PRIMARY KEY (`setting_key`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.settings: 0 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `settings` DISABLE KEYS */;
/*!40000 ALTER TABLE `settings` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.users
CREATE TABLE IF NOT EXISTS `users` (
  `id` int NOT NULL AUTO_INCREMENT,
  `username` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL,
  `password_hash` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `full_name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `role` enum('admin','editor','author') COLLATE utf8mb4_unicode_ci DEFAULT 'author',
  `permissions` json DEFAULT NULL,
  `is_active` tinyint(1) DEFAULT '1',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=MyISAM AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.users: 1 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `users` DISABLE KEYS */;
INSERT INTO `users` (`id`, `username`, `password_hash`, `full_name`, `role`, `permissions`, `is_active`, `created_at`) VALUES
	(2, 'admin', '$2b$10$vpgtTA51GVgFZZpKJgFwcODV8gjWEhTpmH/crgj70Wpj8yCCzHYJ2', 'Osman Bey', 'admin', '{"all": true}', 1, '2026-02-08 14:12:57');
/*!40000 ALTER TABLE `users` ENABLE KEYS */;

-- tablo yapƒ±sƒ± d√∂k√ºl√ºyor nerik_db.videos
CREATE TABLE IF NOT EXISTS `videos` (
  `id` int NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `url` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- nerik_db.videos: 0 rows tablosu i√ßin veriler indiriliyor
/*!40000 ALTER TABLE `videos` DISABLE KEYS */;
INSERT INTO `videos` (`id`, `title`, `url`, `created_at`) VALUES
	(1, 'asdasf', 'https://www.youtube.com/embed/aWMdUqyk3Ys&list=RDaWMdUqyk3Ys&start_radio=1', '2026-02-08 20:27:34'),
	(2, 'asdasd', 'https://www.youtube.com/embed/yr7mYngK1Xc', '2026-02-08 20:28:06');
/*!40000 ALTER TABLE `videos` ENABLE KEYS */;

/*!40103 SET TIME_ZONE=IFNULL(@OLD_TIME_ZONE, 'system') */;
/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IFNULL(@OLD_FOREIGN_KEY_CHECKS, 1) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40111 SET SQL_NOTES=IFNULL(@OLD_SQL_NOTES, 1) */;


============================================================
DOSYA YOLU: backend\.env
============================================================
# backend/.env dosyasƒ±nƒ±n i√ßi
DB_HOST=localhost
DB_USER=root
DB_PASS=
DB_NAME=nerik_db
PORT=3000
JWT_SECRET=yusufkeskibursalicipasifaraniyor

============================================================
DOSYA YOLU: backend\createAdmin.js
============================================================
// backend/createAdmin.js
const db = require('./db'); // Veritabanƒ± baƒülantƒ±mƒ±z
const bcrypt = require('bcryptjs'); // ≈ûifreleme aracƒ±mƒ±z

async function createAdmin() {
    const username = 'admin';
    const password = '123123'; // Osman Bey'in ilk ≈üifresi (Sonra deƒüi≈ütirir)
    const fullName = 'Osman Bey';

    try {
        // 1. ≈ûifreyi Hashle (Kriptola)
        const salt = await bcrypt.genSalt(10);
        const hashedPassword = await bcrypt.hash(password, salt);

        // 2. Veritabanƒ±na Ekle
        // role: 'admin' ve permissions: t√ºm yetkiler a√ßƒ±k
        const sql = `INSERT INTO users (username, password_hash, full_name, role, permissions) VALUES (?, ?, ?, ?, ?)`;
        
        await db.query(sql, [
            username, 
            hashedPassword, 
            fullName, 
            'admin', 
            JSON.stringify({ all: true }) // T√ºm yetkiler onda
        ]);

        console.log('‚úÖ S√ºper Admin ba≈üarƒ±yla olu≈üturuldu!');
        console.log(`üë§ Kullanƒ±cƒ± Adƒ±: ${username}`);
        console.log(`üîë ≈ûifre: ${password}`);
        process.exit(); // ƒ∞≈ü bitince √ßƒ±k

    } catch (error) {
        if (error.code === 'ER_DUP_ENTRY') {
            console.log('‚ö†Ô∏è Bu kullanƒ±cƒ± zaten var!');
        } else {
            console.error('‚ùå Hata olu≈ütu:', error);
        }
        process.exit(1);
    }
}

createAdmin();

============================================================
DOSYA YOLU: backend\db.js
============================================================
// backend/db.js
const mysql = require('mysql2');
require('dotenv').config();

// Baƒülantƒ± havuzu olu≈üturuyoruz
const pool = mysql.createPool({
    host: process.env.DB_HOST,
    user: process.env.DB_USER,
    password: process.env.DB_PASS,
    database: process.env.DB_NAME,
    waitForConnections: true,
    connectionLimit: 10,
    queueLimit: 0
});

// Baƒülantƒ±yƒ± test edelim (Sadece sunucu a√ßƒ±lƒ±rken 1 kere dener)
pool.getConnection((err, connection) => {
    if (err) {
        console.error('‚ùå Veritabanƒ± Hatasƒ±:', err.message);
    } else {
        console.log('‚úÖ MySQL Baƒülantƒ±sƒ± Ba≈üarƒ±lƒ±!');
        connection.release();
    }
});

module.exports = pool.promise();

============================================================
DOSYA YOLU: backend\package.json
============================================================
{
  "name": "backend",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "bcryptjs": "^3.0.3",
    "body-parser": "^2.2.2",
    "cors": "^2.8.6",
    "dotenv": "^17.2.4",
    "express": "^5.2.1",
    "helmet": "^8.1.0",
    "jsonwebtoken": "^9.0.3",
    "morgan": "^1.10.1",
    "multer": "^2.0.2",
    "mysql2": "^3.16.3",
    "slugify": "^1.6.6"
  },
  "devDependencies": {
    "nodemon": "^3.1.11"
  }
}


============================================================
DOSYA YOLU: backend\server.js
============================================================
const express = require('express');
const cors = require('cors');
const path = require('path');
const multer = require('multer');
const fs = require('fs');

// KONTROLC√úLER (Beyinler)
const authRoutes = require('./routes/authRoutes');
const newsRoutes = require('./routes/newsRoutes');
const contentController = require('./controllers/contentController');
const userController = require('./controllers/userController');

// Mƒ∞DDLEWARE (G√ºvenlik G√∂revlisi) - ƒ∞≈ûTE EKSƒ∞K OLAN BUYDU!
const checkAuth = require('./middleware/authMiddleware');

const app = express();
const PORT = 3000;

// 1. AYARLAR VE ƒ∞Zƒ∞NLER
app.use(cors());
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// Resim klas√∂r√ºn√º dƒ±≈üarƒ± a√ß
app.use('/uploads', express.static(path.join(__dirname, 'public/uploads')));

// --- RESƒ∞M Y√úKLEME AYARI (MULTER) ---
const storage = multer.diskStorage({
    destination: (req, file, cb) => {
        const dir = 'public/uploads/';
        if (!fs.existsSync(dir)){
            fs.mkdirSync(dir, { recursive: true });
        }
        cb(null, dir);
    },
    filename: (req, file, cb) => {
        cb(null, Date.now() + path.extname(file.originalname)); 
    }
});
const upload = multer({ storage: storage });

// 2. ANA ROTALAR
app.use('/api/auth', authRoutes);
app.use('/api/news', newsRoutes);

// --- 3. ƒ∞√áERƒ∞K Y√ñNETƒ∞Mƒ∞ ROTALARI ---

// PERSONEL Y√ñNETƒ∞Mƒ∞
app.get('/api/users', userController.getUsers);
app.post('/api/users', upload.single('image'), userController.addUser);
app.delete('/api/users/:id', userController.deleteUser);

// Vƒ∞DEOLAR
app.get('/api/videos', contentController.getVideos);
app.post('/api/videos', upload.none(), contentController.addVideo);
app.delete('/api/videos/:id', contentController.deleteVideo);

// REKLAMLAR
app.get('/api/ads', contentController.getAds);
app.post('/api/ads', upload.single('image'), contentController.addAd);
app.delete('/api/ads/:id', contentController.deleteAd);

// K√ñ≈ûE YAZILARI
// Yazarlarƒ± ve yazƒ±larƒ± herkes g√∂rebilir
app.get('/api/authors', contentController.getAuthors);
app.get('/api/column-posts', contentController.getColumnPosts);

// Yazƒ± eklerken ve silerken G√úVENLƒ∞K (checkAuth) lazƒ±m!
app.post('/api/column-posts', checkAuth, upload.none(), contentController.addColumnPost);
app.delete('/api/column-posts/:id', checkAuth, contentController.deleteColumnPost);

// Sunucuyu Ba≈ülat
app.listen(PORT, () => {
    console.log(`üöÄ Sunucu Aktif: http://localhost:${PORT}`);
});

============================================================
DOSYA YOLU: backend\controllers\authController.js
============================================================
const db = require('../db');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');

exports.register = async (req, res) => {
    const { username, password, full_name } = req.body;

    // 1. Kullanƒ±cƒ± var mƒ± kontrol et
    const [existingUser] = await db.query('SELECT * FROM users WHERE username = ?', [username]);
    if (existingUser.length > 0) {
        return res.status(400).json({ message: 'Bu kullanƒ±cƒ± adƒ± zaten alƒ±nmƒ±≈ü.' });
    }

    // 2. ≈ûifreyi ≈üifrele (Hash)
    const salt = await bcrypt.genSalt(10);
    const hashedPassword = await bcrypt.hash(password, salt);

    // 3. Veritabanƒ±na kaydet
    // Varsayƒ±lan rol 'author' (yazar) ve izin 'can_post_column' (yazƒ± yazabilir) olarak atanƒ±r
    const defaultPermissions = JSON.stringify({ can_post_column: true });
    
    const sql = 'INSERT INTO users (username, password_hash, full_name, role, permissions) VALUES (?, ?, ?, ?, ?)';
    await db.query(sql, [username, hashedPassword, full_name, 'author', defaultPermissions]);

    res.status(201).json({ message: 'Kullanƒ±cƒ± ba≈üarƒ±yla olu≈üturuldu.' });
};

exports.login = async (req, res) => {
    const { username, password } = req.body;
    
    const [users] = await db.query('SELECT * FROM users WHERE username = ?', [username]);
    if (users.length === 0) return res.status(400).json({ message: 'Kullanƒ±cƒ± bulunamadƒ±.' });

    const user = users[0];
    const isMatch = await bcrypt.compare(password, user.password_hash);
    if (!isMatch) return res.status(400).json({ message: '≈ûifre hatalƒ±.' });

    // --- ƒ∞Zƒ∞N KONTROL√ú (D√ºzeltilmi≈ü Tek Blok) ---
    let userPermissions = {};
    try {
        if (user.permissions) {
            // Eƒüer veritabanƒ±ndan string gelirse JSON'a √ßevir, zaten obje ise direkt al
            userPermissions = typeof user.permissions === 'string' ? JSON.parse(user.permissions) : user.permissions;
        } else {
            userPermissions = {}; // Null ise bo≈ü obje yap
        }
    } catch (e) {
        userPermissions = {};
    }
    // -------------------------------------------

    // Token olu≈ütur
    const token = jwt.sign(
        { 
            id: user.id, 
            role: user.role, 
            username: user.username,
            permissions: userPermissions 
        },
        process.env.JWT_SECRET,
        { expiresIn: '1d' }
    );

    res.json({
        message: 'Giri≈ü ba≈üarƒ±lƒ±',
        token,
        user: {
            id: user.id,
            username: user.username,
            full_name: user.full_name,
            role: user.role,
            permissions: userPermissions
        }
    });
};

============================================================
DOSYA YOLU: backend\controllers\contentController.js
============================================================
const db = require('../db');
const fs = require('fs');

// --- Vƒ∞DEO ƒ∞≈ûLEMLERƒ∞ ---
exports.getVideos = async (req, res) => {
    try { const [rows] = await db.query('SELECT * FROM videos ORDER BY created_at DESC'); res.json(rows); } catch (err) { res.status(500).json({ error: err.message }); }
};
exports.addVideo = async (req, res) => {
    try {
        let { title, url } = req.body;
        if(url.includes('watch?v=')) url = url.replace('watch?v=', 'embed/');
        else if(url.includes('youtu.be/')) url = url.replace('youtu.be/', 'youtube.com/embed/');
        await db.query('INSERT INTO videos (title, url) VALUES (?, ?)', [title, url]);
        res.json({ message: 'Video eklendi' });
    } catch (err) { res.status(500).json({ error: err.message }); }
};
exports.deleteVideo = async (req, res) => {
    try { await db.query('DELETE FROM videos WHERE id = ?', [req.params.id]); res.json({ message: 'Silindi' }); } catch (err) { res.status(500).json({ error: err.message }); }
};

// --- REKLAM ƒ∞≈ûLEMLERƒ∞ ---
exports.getAds = async (req, res) => {
    try { const [rows] = await db.query('SELECT * FROM ads ORDER BY id DESC'); res.json(rows); } catch (err) { res.status(500).json({ error: err.message }); }
};
exports.addAd = async (req, res) => {
    try {
        const { title, target_url, area } = req.body;
        const imagePath = req.file ? `/uploads/${req.file.filename}` : null;
        await db.query('INSERT INTO ads (title, image_path, target_url, area) VALUES (?, ?, ?, ?)', [title, imagePath, target_url, area]);
        res.json({ message: 'Reklam eklendi' });
    } catch (err) { res.status(500).json({ error: err.message }); }
};
exports.deleteAd = async (req, res) => {
    try { await db.query('DELETE FROM ads WHERE id = ?', [req.params.id]); res.json({ message: 'Silindi' }); } catch (err) { res.status(500).json({ error: err.message }); }
};

// --- K√ñ≈ûE YAZILARI (D√úZELTƒ∞LMƒ∞≈û B√ñL√úM) ---

// Yazarlarƒ± Getir (Admin panelinde yazar listesi gerekirse diye)
exports.getAuthors = async (req, res) => {
    try {
        const [rows] = await db.query("SELECT id, full_name, image_path FROM users WHERE role IN ('admin', 'editor', 'author')");
        res.json(rows);
    } catch (err) { res.status(500).json({ error: err.message }); }
};

// Yazƒ±larƒ± Getir (BURASI HATALIYDI, D√úZELTƒ∞LDƒ∞)
exports.getColumnPosts = async (req, res) => {
    try {
        // ARTIK 'columnists' YOK, 'users' TABLOSUNA BAƒûLIYORUZ (JOIN users)
        // VE 'columnist_id' YERƒ∞NE 'user_id' KULLANIYORUZ
        const sql = `
            SELECT p.*, u.full_name as author_name, u.image_path as author_image 
            FROM column_posts p 
            JOIN users u ON p.user_id = u.id 
            ORDER BY p.created_at DESC
        `;
        const [rows] = await db.query(sql);
        res.json(rows);
    } catch (err) { 
        console.error("üî• Listeleme Hatasƒ±:", err); // Hatayƒ± terminale bas
        res.status(500).json({ error: err.message }); 
    }
};

// Yazƒ± Ekle
exports.addColumnPost = async (req, res) => {
    try {
        const { title, content } = req.body;
        
        // G√ºvenlik kontrol√º
        if (!req.userData) return res.status(401).json({ message: 'Oturum hatasƒ±.' });

        const userId = req.userData.userId;
        const permissions = req.userData.permissions || {};

        // Yetki kontrol√º
        if (!permissions.all && !permissions.can_post_column) {
            return res.status(403).json({ message: 'Yetkiniz yok.' });
        }

        await db.query('INSERT INTO column_posts (title, content, user_id) VALUES (?, ?, ?)', [title, content, userId]);
        res.json({ message: 'K√∂≈üe yazƒ±sƒ± yayƒ±nlandƒ±' });
    } catch (err) { 
        console.error("üî• Ekleme Hatasƒ±:", err);
        res.status(500).json({ error: err.message }); 
    }
};

exports.deleteColumnPost = async (req, res) => {
    try {
        const permissions = req.userData ? (req.userData.permissions || {}) : {};
        if (!permissions.all && !permissions.can_delete_column) {
            return res.status(403).json({ message: 'Silme yetkiniz yok!' });
        }

        await db.query('DELETE FROM column_posts WHERE id = ?', [req.params.id]);
        res.json({ message: 'Yazƒ± silindi' });
    } catch (err) { res.status(500).json({ error: err.message }); }
};

============================================================
DOSYA YOLU: backend\controllers\newsController.js
============================================================
const db = require('../db');
const slugify = require('slugify');
const fs = require('fs');

// 1. T√úM HABERLERƒ∞ GETƒ∞R (Filtreleme Destekli)
exports.getAllNews = async (req, res) => {
    const page = parseInt(req.query.page) || 1;
    const limit = parseInt(req.query.limit) || 20;
    const offset = (page - 1) * limit;
    const type = req.query.type; // 'slider' veya 'breaking' filtresi

    try {
        let whereClause = 'WHERE n.status = "published"';
        if (type === 'slider') whereClause += ' AND n.is_slider = 1';
        if (type === 'breaking') whereClause += ' AND n.is_breaking = 1';

        // Toplam sayƒ±yƒ± al
        const [countResult] = await db.query(`SELECT COUNT(*) as total FROM news n ${whereClause}`);
        const totalItems = countResult[0].total;

        const sql = `
            SELECT n.*, c.name as category_name, c.color as category_color, u.full_name as author_name 
            FROM news n 
            LEFT JOIN categories c ON n.category_id = c.id
            LEFT JOIN users u ON n.author_id = u.id
            ${whereClause}
            ORDER BY n.created_at DESC 
            LIMIT ? OFFSET ?
        `;

        const [news] = await db.query(sql, [limit, offset]);

        res.json({
            news,
            currentPage: page,
            totalPages: Math.ceil(totalItems / limit),
            totalItems
        });
    } catch (err) {
        res.status(500).json({ error: err.message });
    }
};

// 2. TEK HABER DETAYI
exports.getNewsBySlug = async (req, res) => {
    try {
        const sql = `
            SELECT n.*, c.name as category_name, u.full_name as author_name 
            FROM news n 
            LEFT JOIN categories c ON n.category_id = c.id
            LEFT JOIN users u ON n.author_id = u.id
            WHERE n.slug = ?
        `;
        const [rows] = await db.query(sql, [req.params.slug]);

        if (rows.length === 0) return res.status(404).json({ message: 'Haber bulunamadƒ±' });

        db.query('UPDATE news SET view_count = view_count + 1 WHERE id = ?', [rows[0].id]);

        res.json(rows[0]);
    } catch (err) {
        res.status(500).json({ error: err.message });
    }
};

// 3. YENƒ∞ HABER EKLE
exports.createNews = async (req, res) => {
    try {
        const { title, summary, content, category_id, is_breaking, is_slider } = req.body;
        const imagePath = req.file ? `/uploads/${req.file.filename}` : null;

        let slug = slugify(title, { lower: true, strict: true, locale: 'tr' });
        
        const [check] = await db.query('SELECT id FROM news WHERE slug = ?', [slug]);
        if (check.length > 0) slug += `-${Date.now()}`;

        const sql = `
            INSERT INTO news (title, slug, summary, content, image_path, category_id, author_id, status, is_breaking, is_slider) 
            VALUES (?, ?, ?, ?, ?, ?, ?, 'published', ?, ?)
        `;

        await db.query(sql, [
            title, slug, summary, content, imagePath, category_id, 
            req.userData.userId, 
            is_breaking === 'true' ? 1 : 0, 
            is_slider === 'true' ? 1 : 0
        ]);

        res.status(201).json({ message: 'Haber ba≈üarƒ±yla eklendi', slug });
    } catch (err) {
        res.status(500).json({ error: err.message });
    }
};

// 4. HABER Sƒ∞L
exports.deleteNews = async (req, res) => {
    try {
        const [item] = await db.query('SELECT image_path FROM news WHERE id = ?', [req.params.id]);

        if (item.length > 0 && item[0].image_path) {
            const filePath = `public${item[0].image_path}`; 
            if (fs.existsSync(filePath)) fs.unlinkSync(filePath);
        }

        await db.query('DELETE FROM news WHERE id = ?', [req.params.id]);
        res.json({ message: 'Haber ve resmi silindi.' });
    } catch (err) {
        res.status(500).json({ error: err.message });
    }
};

// 5. HABER G√úNCELLE
exports.updateNews = async (req, res) => {
    try {
        const { title, summary, content, category, is_breaking, is_slider } = req.body;
        const newsId = req.params.id;

        let slug = slugify(title, { lower: true, strict: true, locale: 'tr' });
        slug += `-${Date.now()}`;

        const [catResult] = await db.query('SELECT id FROM categories WHERE name = ?', [category]);
        const categoryId = catResult.length > 0 ? catResult[0].id : 1;

        let queryParams = [
            title, slug, summary, content, categoryId, 
            is_breaking === 'true' ? 1 : 0, 
            is_slider === 'true' ? 1 : 0
        ];

        let imageSqlPart = "";
        if (req.file) {
            const imagePath = `/uploads/${req.file.filename}`;
            imageSqlPart = ", image_path = ?";
            queryParams.push(imagePath);
        }

        queryParams.push(newsId);

        const sql = `
            UPDATE news 
            SET title=?, slug=?, summary=?, content=?, category_id=?, is_breaking=?, is_slider=?, status='published', updated_at=NOW() ${imageSqlPart}
            WHERE id=?
        `;

        await db.query(sql, queryParams);
        res.json({ message: 'Haber ba≈üarƒ±yla g√ºncellendi!' });
    } catch (err) {
        res.status(500).json({ error: 'G√ºncelleme hatasƒ±.' });
    }
};

// 6. DURUM DEƒûƒ∞≈ûTƒ∞R (Man≈üet Yap/√áƒ±kar)
exports.toggleStatus = async (req, res) => {
    try {
        const { id } = req.params;
        const { field, value } = req.body; // field: 'is_slider', value: 1 veya 0

        if (!['is_slider', 'is_breaking'].includes(field)) {
             return res.status(400).json({ message: 'Ge√ßersiz i≈ülem!' });
        }

        const sql = `UPDATE news SET ${field} = ? WHERE id = ?`;
        await db.query(sql, [value, id]);
        
        res.json({ message: 'Durum g√ºncellendi.' });
    } catch (err) {
        res.status(500).json({ error: err.message });
    }
};

============================================================
DOSYA YOLU: backend\controllers\userController.js
============================================================
const db = require('../db');
const bcrypt = require('bcryptjs');

// Personel Listesi
exports.getUsers = async (req, res) => {
    try {
        const [users] = await db.query('SELECT id, username, full_name, role, image_path, bio, created_at FROM users ORDER BY created_at DESC');
        res.json(users);
    } catch (err) { res.status(500).json({ error: err.message }); }
};

// Yeni Personel Ekle
exports.addUser = async (req, res) => {
    try {
        const { username, password, full_name, role, bio } = req.body;
        const imagePath = req.file ? `/uploads/${req.file.filename}` : null;

        const [exists] = await db.query('SELECT id FROM users WHERE username = ?', [username]);
        if (exists.length > 0) return res.status(400).json({ message: 'Bu kullanƒ±cƒ± adƒ± dolu!' });

        const salt = await bcrypt.genSalt(10);
        const hashedPassword = await bcrypt.hash(password, salt);

        // ƒ∞zinleri role g√∂re otomatik ata (Basit mantƒ±k)
        let permissions = {};
        if (role === 'admin') permissions = { all: true };
        else if (role === 'author') permissions = { can_post_column: true };
        else if (role === 'editor') permissions = { can_edit_news: true };

        const sql = 'INSERT INTO users (username, password_hash, full_name, role, permissions, image_path, bio) VALUES (?, ?, ?, ?, ?, ?, ?)';
        await db.query(sql, [username, hashedPassword, full_name, role, JSON.stringify(permissions), imagePath, bio]);

        res.json({ message: 'Personel ba≈üarƒ±yla eklendi.' });
    } catch (err) { res.status(500).json({ error: err.message }); }
};

// Personel Sil
exports.deleteUser = async (req, res) => {
    try {
        await db.query('DELETE FROM users WHERE id = ?', [req.params.id]);
        res.json({ message: 'Personel silindi.' });
    } catch (err) { res.status(500).json({ error: err.message }); }
};

============================================================
DOSYA YOLU: backend\controllers\videoController.js
============================================================
const db = require('../db');

exports.getAllVideos = async (req, res) => {
    try {
        const [videos] = await db.query('SELECT * FROM videos ORDER BY created_at DESC');
        res.json(videos);
    } catch (err) {
        res.status(500).json({ error: err.message });
    }
};

exports.addVideo = async (req, res) => {
    try {
        const { title, video_url } = req.body;
        // Youtube Embed linkine √ßevirme (Basit mantƒ±k)
        // Link: https://www.youtube.com/watch?v=dQw4w9WgXcQ -> Embed: https://www.youtube.com/embed/dQw4w9WgXcQ
        let finalUrl = video_url;
        if(video_url.includes('watch?v=')) {
            finalUrl = video_url.replace('watch?v=', 'embed/');
        } else if(video_url.includes('youtu.be/')) {
            finalUrl = video_url.replace('youtu.be/', 'youtube.com/embed/');
        }

        const sql = 'INSERT INTO videos (title, video_url) VALUES (?, ?)';
        await db.query(sql, [title, finalUrl]);
        res.status(201).json({ message: 'Video eklendi' });
    } catch (err) {
        res.status(500).json({ error: err.message });
    }
};

exports.deleteVideo = async (req, res) => {
    try {
        await db.query('DELETE FROM videos WHERE id = ?', [req.params.id]);
        res.json({ message: 'Video silindi' });
    } catch (err) {
        res.status(500).json({ error: err.message });
    }
};

============================================================
DOSYA YOLU: backend\middleware\authMiddleware.js
============================================================
const jwt = require('jsonwebtoken');

module.exports = (req, res, next) => {
    try {
        // Token'ƒ± header'dan al ("Bearer <token>" formatƒ±nda)
        const token = req.headers.authorization.split(' ')[1];
        
        // ≈ûifreyi √ß√∂z
        const decodedToken = jwt.verify(token, process.env.JWT_SECRET);
        
        // Verileri isteƒüe ekle
        req.userData = { 
            userId: decodedToken.id, 
            role: decodedToken.role,
            permissions: decodedToken.permissions 
        };
        
        next();
    } catch (error) {
        res.status(401).json({ message: 'Yetkisiz eri≈üim! L√ºtfen giri≈ü yapƒ±n.' });
    }
};

============================================================
DOSYA YOLU: backend\routes\authRoutes.js
============================================================
// backend/routes/authRoutes.js
const express = require('express');
const router = express.Router();
const authController = require('../controllers/authController');

// Link: http://localhost:3000/api/auth/register
router.post('/register', authController.register);

// Link: http://localhost:3000/api/auth/login
router.post('/login', authController.login);

module.exports = router;

============================================================
DOSYA YOLU: backend\routes\newsRoutes.js
============================================================
const express = require('express');
const router = express.Router();
const newsController = require('../controllers/newsController');
const checkAuth = require('../middleware/authMiddleware');
const multer = require('multer');
const path = require('path');

const storage = multer.diskStorage({
    destination: (req, file, cb) => {
        cb(null, 'public/uploads/');
    },
    filename: (req, file, cb) => {
        cb(null, Date.now() + path.extname(file.originalname)); 
    }
});
const upload = multer({ storage: storage });

// --- ROTALAR ---
router.get('/', newsController.getAllNews);
router.get('/:slug', newsController.getNewsBySlug);

// Korumalƒ± Rotalar (Sadece Admin)
router.post('/', checkAuth, upload.single('image'), newsController.createNews);
router.put('/:id', checkAuth, upload.single('image'), newsController.updateNews); // G√ºncelleme
router.delete('/:id', checkAuth, newsController.deleteNews);
router.patch('/:id/toggle', checkAuth, newsController.toggleStatus); // Hƒ±zlƒ± Durum Deƒüi≈ütirme

module.exports = router;

============================================================
DOSYA YOLU: database\vetiabanƒ±_kodlari.sql
============================================================
-- 1. Veritabanƒ±nƒ± olu≈ütur ve se√ß
CREATE DATABASE IF NOT EXISTS nerik_db;
USE nerik_db;

-- 2. √ñNCE KULLANICILAR TABLOSU (Foreign Key hatasƒ± almamak i√ßin)
CREATE TABLE IF NOT EXISTS users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    full_name VARCHAR(100) NOT NULL,
    role ENUM('admin', 'editor', 'author') DEFAULT 'author',
    permissions JSON,
    is_active BOOLEAN DEFAULT 1,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 3. SONRA KATEGORƒ∞LER TABLOSU
CREATE TABLE IF NOT EXISTS categories (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    slug VARCHAR(50) NOT NULL UNIQUE,
    color VARCHAR(20) DEFAULT '#2563eb'
);

-- 4. EN SON HABERLER TABLOSU (D√ºzeltilmi≈ü Hali)
CREATE TABLE IF NOT EXISTS news (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    slug VARCHAR(191) NOT NULL UNIQUE, -- HATA √á√ñZ√úM√ú: 255 yerine 191 yapƒ±ldƒ±.
    summary VARCHAR(500),
    content LONGTEXT,
    image_path VARCHAR(255),
    category_id INT,
    author_id INT,
    status ENUM('draft', 'published', 'archived') DEFAULT 'draft',
    view_count INT DEFAULT 0,
    is_breaking BOOLEAN DEFAULT 0,
    is_slider BOOLEAN DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (category_id) REFERENCES categories(id) ON DELETE SET NULL,
    FOREIGN KEY (author_id) REFERENCES users(id) ON DELETE SET NULL
);

-- 5. AYARLAR TABLOSU
CREATE TABLE IF NOT EXISTS settings (
    setting_key VARCHAR(50) PRIMARY KEY,
    setting_value LONGTEXT
);

-- √ñrnek Kategoriler Ekle
INSERT INTO categories (name, slug) VALUES 
('G√ºndem', 'gundem'), 
('Spor', 'spor'), 
('Ekonomi', 'ekonomi');

-- √ñrnek Admin Hesabƒ± (Test i√ßin)
INSERT INTO users (username, password_hash, full_name, role, permissions) 
VALUES ('admin', 'hashlenmis_sifre_ornegi', 'Osman Bey', 'admin', '{"all": true}');

============================================================
DOSYA YOLU: frontend\.editorconfig
============================================================
# Editor configuration, see https://editorconfig.org
root = true

[*]
charset = utf-8
indent_style = space
indent_size = 2
insert_final_newline = true
trim_trailing_whitespace = true

[*.ts]
quote_type = single
ij_typescript_use_double_quotes = false

[*.md]
max_line_length = off
trim_trailing_whitespace = false


============================================================
DOSYA YOLU: frontend\.gitignore
============================================================
# See https://docs.github.com/get-started/getting-started-with-git/ignoring-files for more about ignoring files.

# Compiled output
/dist
/tmp
/out-tsc
/bazel-out

# Node
/node_modules
npm-debug.log
yarn-error.log

# IDEs and editors
.idea/
.project
.classpath
.c9/
*.launch
.settings/
*.sublime-workspace

# Visual Studio Code
.vscode/*
!.vscode/settings.json
!.vscode/tasks.json
!.vscode/launch.json
!.vscode/extensions.json
.history/*

# Miscellaneous
/.angular/cache
.sass-cache/
/connect.lock
/coverage
/libpeerconnection.log
testem.log
/typings
__screenshots__/

# System files
.DS_Store
Thumbs.db


============================================================
DOSYA YOLU: frontend\angular.json
============================================================
{
  "$schema": "./node_modules/@angular/cli/lib/config/schema.json",
  "version": 1,
  "cli": {
    "packageManager": "npm",
    "analytics": false
  },
  "newProjectRoot": "projects",
  "projects": {
    "frontend": {
      "projectType": "application",
      "schematics": {},
      "root": "",
      "sourceRoot": "src",
      "prefix": "app",
      "architect": {
        "build": {
          "builder": "@angular/build:application",
          "options": {
            "browser": "src/main.ts",
            "tsConfig": "tsconfig.app.json",
            "assets": [
              {
                "glob": "**/*",
                "input": "public"
              }
            ],
            "styles": [
              "src/styles.css",
              "node_modules/bootstrap/dist/css/bootstrap.min.css",
              "node_modules/@fortawesome/fontawesome-free/css/all.min.css",
              "node_modules/quill/dist/quill.snow.css",
              "node_modules/cropperjs/dist/cropper.css"
            ],
            "scripts": [
              "node_modules/@popperjs/core/dist/umd/popper.min.js",
              "node_modules/bootstrap/dist/js/bootstrap.min.js"
            ]
            
          },
          "configurations": {
            "production": {
              "budgets": [
                {
                  "type": "initial",
                  "maximumWarning": "500kB",
                  "maximumError": "1MB"
                },
                {
                  "type": "anyComponentStyle",
                  "maximumWarning": "4kB",
                  "maximumError": "8kB"
                }
              ],
              "outputHashing": "all"
            },
            "development": {
              "optimization": false,
              "extractLicenses": false,
              "sourceMap": true
            }
          },
          "defaultConfiguration": "production"
        },
        "serve": {
          "builder": "@angular/build:dev-server",
          "configurations": {
            "production": {
              "buildTarget": "frontend:build:production"
            },
            "development": {
              "buildTarget": "frontend:build:development"
            }
          },
          "defaultConfiguration": "development"
        },
        "test": {
          "builder": "@angular/build:unit-test"
        }
      }
    }
  }
}


============================================================
DOSYA YOLU: frontend\package.json
============================================================
{
  "name": "frontend",
  "version": "0.0.0",
  "scripts": {
    "ng": "ng",
    "start": "ng serve",
    "build": "ng build",
    "watch": "ng build --watch --configuration development",
    "test": "ng test",
    "serve:ssr:frontend": "node dist/frontend/server/server.mjs"
  },
  "prettier": {
    "printWidth": 100,
    "singleQuote": true,
    "overrides": [
      {
        "files": "*.html",
        "options": {
          "parser": "angular"
        }
      }
    ]
  },
  "private": true,
  "packageManager": "npm@11.6.2",
  "dependencies": {
    "@angular/animations": "^21.1.3",
    "@angular/common": "^21.0.0",
    "@angular/compiler": "^21.0.0",
    "@angular/core": "^21.0.0",
    "@angular/forms": "^21.0.0",
    "@angular/platform-browser": "^21.0.0",
    "@angular/platform-server": "^21.0.0",
    "@angular/router": "^21.0.0",
    "@angular/ssr": "^21.0.0",
    "@fortawesome/fontawesome-free": "^7.1.0",
    "@popperjs/core": "^2.11.8",
    "bootstrap": "^5.3.8",
    "cropperjs": "^1.5.13",
    "express": "^5.1.0",
    "font-awesome": "^4.7.0",
    "ngx-quill": "^26.0.0",
    "ngx-toastr": "^20.0.5",
    "quill": "^2.0.2",
    "rxjs": "~7.8.0",
    "tslib": "^2.3.0"
  },
  "devDependencies": {
    "@angular/build": "^21.0.0",
    "@angular/cli": "^21.0.0",
    "@angular/compiler-cli": "^21.0.0",
    "@types/express": "^5.0.1",
    "@types/node": "^20.17.19",
    "jsdom": "^27.1.0",
    "typescript": "~5.9.2",
    "vitest": "^4.0.8"
  }
}


============================================================
DOSYA YOLU: frontend\README.md
============================================================
# Frontend

This project was generated using [Angular CLI](https://github.com/angular/angular-cli) version 21.0.0.

## Development server

To start a local development server, run:

```bash
ng serve
```

Once the server is running, open your browser and navigate to `http://localhost:4200/`. The application will automatically reload whenever you modify any of the source files.

## Code scaffolding

Angular CLI includes powerful code scaffolding tools. To generate a new component, run:

```bash
ng generate component component-name
```

For a complete list of available schematics (such as `components`, `directives`, or `pipes`), run:

```bash
ng generate --help
```

## Building

To build the project run:

```bash
ng build
```

This will compile your project and store the build artifacts in the `dist/` directory. By default, the production build optimizes your application for performance and speed.

## Running unit tests

To execute unit tests with the [Karma](https://karma-runner.github.io) test runner, use the following command:

```bash
ng test
```

## Running end-to-end tests

For end-to-end (e2e) testing, run:

```bash
ng e2e
```

Angular CLI does not come with an end-to-end testing framework by default. You can choose one that suits your needs.

## Additional Resources

For more information on using the Angular CLI, including detailed command references, visit the [Angular CLI Overview and Command Reference](https://angular.dev/tools/cli) page.


============================================================
DOSYA YOLU: frontend\tsconfig.app.json
============================================================
/* To learn more about Typescript configuration file: https://www.typescriptlang.org/docs/handbook/tsconfig-json.html. */
/* To learn more about Angular compiler options: https://angular.dev/reference/configs/angular-compiler-options. */
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "outDir": "./out-tsc/app",
    "types": [
      "node"
    ]
  },
  "include": [
    "src/**/*.ts"
  ],
  "exclude": [
    "src/**/*.spec.ts"
  ]
}


============================================================
DOSYA YOLU: frontend\tsconfig.json
============================================================
/* To learn more about Typescript configuration file: https://www.typescriptlang.org/docs/handbook/tsconfig-json.html. */
/* To learn more about Angular compiler options: https://angular.dev/reference/configs/angular-compiler-options. */
{
  "compileOnSave": false,
  "compilerOptions": {
    "strict": true,
    "noImplicitOverride": true,
    "noPropertyAccessFromIndexSignature": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "skipLibCheck": true,
    "isolatedModules": true,
    "experimentalDecorators": true,
    "importHelpers": true,
    "target": "ES2022",
    "module": "preserve"
  },
  "angularCompilerOptions": {
    "enableI18nLegacyMessageIdFormat": false,
    "strictInjectionParameters": true,
    "strictInputAccessModifiers": true,
    "strictTemplates": true
  },
  "files": [],
  "references": [
    {
      "path": "./tsconfig.app.json"
    },
    {
      "path": "./tsconfig.spec.json"
    }
  ]
}


============================================================
DOSYA YOLU: frontend\tsconfig.spec.json
============================================================
/* To learn more about Typescript configuration file: https://www.typescriptlang.org/docs/handbook/tsconfig-json.html. */
/* To learn more about Angular compiler options: https://angular.dev/reference/configs/angular-compiler-options. */
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "outDir": "./out-tsc/spec",
    "types": [
      "vitest/globals"
    ]
  },
  "include": [
    "src/**/*.d.ts",
    "src/**/*.spec.ts"
  ]
}


============================================================
DOSYA YOLU: frontend\src\index.html
============================================================
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Nerik Dijital Medya</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Plus+Jakarta+Sans:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <app-root></app-root>
</body>
</html>


============================================================
DOSYA YOLU: frontend\src\main.ts
============================================================
import { bootstrapApplication } from '@angular/platform-browser';
import { appConfig } from './app/app.config';
import { App } from './app/app';

bootstrapApplication(App, appConfig)
  .catch((err) => console.error(err));


============================================================
DOSYA YOLU: frontend\src\styles.css
============================================================
body:not(.admin-body) {
    font-family: 'Plus Jakarta Sans', sans-serif; 
    background-color: #f1f5f9; 
    color: #334155;
    overflow-x: hidden;
}

body:not(.admin-body) h1, 
body:not(.admin-body) h2, 
body:not(.admin-body) h3, 
body:not(.admin-body) h4, 
body:not(.admin-body) h5, 
body:not(.admin-body) h6 { 
    font-family: 'Outfit', sans-serif; 
    color: #0f172a;
    font-weight: 700; 
}

a { text-decoration: none; }

============================================================
DOSYA YOLU: frontend\src\app\app.config.ts
============================================================
import { ApplicationConfig } from '@angular/core';
import { provideRouter } from '@angular/router';
import { routes } from './app.routes';
import { provideHttpClient, withFetch } from '@angular/common/http';
import { provideAnimations } from '@angular/platform-browser/animations';
import { provideToastr } from 'ngx-toastr';

export const appConfig: ApplicationConfig = {
  providers: [
    provideRouter(routes),
    provideHttpClient(withFetch()),
    provideAnimations(),
    provideToastr({
      timeOut: 3000,
      positionClass: 'toast-bottom-right',
      preventDuplicates: true,
    }) 
  ]
};

============================================================
DOSYA YOLU: frontend\src\app\app.css
============================================================
[DOSYA BO≈û]

============================================================
DOSYA YOLU: frontend\src\app\app.html
============================================================
<router-outlet></router-outlet>

============================================================
DOSYA YOLU: frontend\src\app\app.routes.server.ts
============================================================
import { RenderMode, ServerRoute } from '@angular/ssr';

export const serverRoutes: ServerRoute[] = [
  {
    path: '**',
    renderMode: RenderMode.Prerender
  }
];


============================================================
DOSYA YOLU: frontend\src\app\app.routes.ts
============================================================
import { Routes } from '@angular/router';
import { LoginComponent } from './components/login/login';
import { HomeComponent } from './components/home/home';
import { DashboardComponent } from './components/admin/dashboard/dashboard';
import { authGuard } from './guards/auth-guard';
import { NewsDetailComponent } from './components/news-detail/news-detail';

export const routes: Routes = [
    // 1. Site a√ßƒ±lƒ±nca direkt Anasayfaya git
    { path: '', component: HomeComponent },
    
    // 2. Sadece /login yazanlar giri≈ü ekranƒ±na gitsin
    { path: 'login', component: LoginComponent },

    { path: 'haber/:slug', component: NewsDetailComponent },

    // 3. Dashboard sayfasƒ± i√ßin route 
    { path: 'admin', component: DashboardComponent },

    { path: 'admin', component: DashboardComponent, canActivate: [authGuard] }
];

============================================================
DOSYA YOLU: frontend\src\app\app.spec.ts
============================================================
import { TestBed } from '@angular/core/testing';
import { App } from './app';

describe('App', () => {
  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [App],
    }).compileComponents();
  });

  it('should create the app', () => {
    const fixture = TestBed.createComponent(App);
    const app = fixture.componentInstance;
    expect(app).toBeTruthy();
  });

  it('should render title', async () => {
    const fixture = TestBed.createComponent(App);
    await fixture.whenStable();
    const compiled = fixture.nativeElement as HTMLElement;
    expect(compiled.querySelector('h1')?.textContent).toContain('Hello, frontend');
  });
});


============================================================
DOSYA YOLU: frontend\src\app\app.ts
============================================================
import { Component, signal } from '@angular/core';
import { RouterOutlet } from '@angular/router';

@Component({
  selector: 'app-root',
  imports: [RouterOutlet],
  templateUrl: './app.html',
  styleUrl: './app.css'
})
export class App {
  protected readonly title = signal('frontend');
}


============================================================
DOSYA YOLU: frontend\src\app\components\admin\dashboard\dashboard.css
============================================================
/* --- Admin Paneli STƒ∞LLERƒ∞ (Deƒüi≈üken Yok, Doƒürudan Renk) --- */

/* Ana Kapsayƒ±cƒ± */
.admin-wrapper {
    display: flex;
    background-color: #f8f9fa !important; /* A√ßƒ±k gri zemin */
    min-height: 100vh;
    font-family: 'Segoe UI', system-ui, sans-serif;
}

/* Sidebar (Sol Men√º) - Rengi #0f172a (Lacivert) Olarak Zorluyoruz */
.sidebar { 
    width: 280px; 
    height: 100vh; 
    position: fixed; 
    top: 0;
    left: 0;
    background-color: #0f172a !important; /* Koyu Lacivert */
    color: white !important; /* Yazƒ±lar Beyaz */
    z-index: 1000;
    box-shadow: 5px 0 25px rgba(0,0,0,0.05);
    overflow-y: auto;
}

/* Sidebar Marka Alanƒ± */
.sidebar-brand {
    padding: 20px;
    text-align: center;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

/* Men√º Linkleri */
.sidebar .nav-link { 
    color: rgba(255, 255, 255, 0.7) !important; /* Hafif saydam beyaz */
    padding: 15px 20px;
    font-weight: 500;
    font-size: 0.95rem;
    transition: all 0.2s ease;
    cursor: pointer;
    display: flex;
    align-items: center;
    border-radius: 8px;
    margin: 5px 10px;
}

/* Linkin √úzerine Gelince */
.sidebar .nav-link:hover, .sidebar .nav-link.active { 
    background-color: rgba(255, 255, 255, 0.15) !important;
    color: #ffffff !important;
    padding-left: 25px !important; /* Hafif saƒüa kayma efekti */
}

/* ƒ∞konlar */
.sidebar .nav-link i {
    width: 25px;
    text-align: center;
}

/* Saƒü ƒ∞√ßerik Alanƒ± */
.main-content { 
    margin-left: 280px; 
    padding: 30px;
    width: calc(100% - 280px);
    background-color: #f8f9fa !important;
}

/* Y√ºkleme Kutusu (Image Upload) */
.image-upload-box {
    transition: all 0.3s border-color;
    border: 2px dashed #cbd5e1;
    background-color: #ffffff;
}
.image-upload-box:hover {
    border-color: #2563eb !important; /* Mavi √áer√ßeve */
    background-color: #eff6ff !important;
}

/* Cropper (Kƒ±rpma) Alanƒ± */
.cropper-container {
    width: 100%;
    max-height: 400px;
    border-radius: 8px;
    overflow: hidden;
    background-color: #333;
}

============================================================
DOSYA YOLU: frontend\src\app\components\admin\dashboard\dashboard.html
============================================================
<div class="admin-wrapper d-flex">
    <div class="sidebar" id="sidebar">
        <div class="sidebar-brand text-center py-4 border-bottom border-secondary">
            <span class="text-primary fw-bold fs-4">N</span><span class="text-white fw-bold fs-4">ERƒ∞K</span>
            <small class="d-block text-muted" style="font-size: 0.7rem;">Y√ñNETƒ∞M PANELƒ∞</small>
        </div>
        <nav class="mt-4 px-2 d-flex flex-column gap-1">
            <a (click)="switchTab('news')" [class.active]="activeTab === 'news'" class="nav-link rounded p-3 text-white-50 hover-text-white" style="cursor: pointer;"><i class="fas fa-newspaper me-3 text-primary"></i> Haberler</a>
            <a (click)="switchTab('slider')" [class.active]="activeTab === 'slider'" class="nav-link rounded p-3 text-white-50 hover-text-white" style="cursor: pointer;"><i class="fas fa-images me-3 text-warning"></i> Man≈üetler</a>
            <a (click)="switchTab('breaking')" [class.active]="activeTab === 'breaking'" class="nav-link rounded p-3 text-white-50 hover-text-white" style="cursor: pointer;"><i class="fas fa-bolt me-3 text-danger"></i> Son Dakika</a>
            <a (click)="switchTab('videos')" [class.active]="activeTab === 'videos'" class="nav-link rounded p-3 text-white-50 hover-text-white" style="cursor: pointer;"><i class="fab fa-youtube me-3 text-danger"></i> Video Galeri</a>
            <a (click)="switchTab('ads')" [class.active]="activeTab === 'ads'" class="nav-link rounded p-3 text-white-50 hover-text-white" style="cursor: pointer;"><i class="fas fa-ad me-3 text-success"></i> Reklamlar</a>
            <a *ngIf="currentUser.permissions?.all || currentUser.permissions?.can_post_column" 
   (click)="switchTab('columnists')" 
   [class.active]="activeTab === 'columnists'" 
   class="nav-link rounded p-3 text-white-50 hover-text-white" 
   style="cursor: pointer;">
   <i class="fas fa-pen-nib me-3 text-info"></i> K√∂≈üe Yazƒ±larƒ±
</a>
            <hr class="border-secondary my-3">
            <a routerLink="/" class="nav-link rounded p-3 text-info" style="cursor: pointer;"><i class="fas fa-external-link-alt me-3"></i> Siteyi G√∂r</a>
            <a (click)="onLogout()" class="nav-link rounded p-3 text-danger mt-2" style="cursor: pointer;"><i class="fas fa-sign-out-alt me-3"></i> G√ºvenli √áƒ±kƒ±≈ü</a>
        </nav>
    </div>

    <div class="main-content flex-grow-1 bg-light">
        <div class="d-flex justify-content-between align-items-center mb-5 bg-white p-4 rounded-4 shadow-sm">
            <h4 class="fw-bold text-dark mb-0 text-uppercase">{{ activeTab }} Y√ñNETƒ∞Mƒ∞</h4>
            <small class="text-muted">Ho≈ü geldin, {{ currentUser?.full_name || 'Admin' }}</small>
        </div>

        <div *ngIf="activeTab === 'news'" class="fade-in">
            <div class="mb-4" *ngIf="!showForm">
                <button class="btn btn-primary px-4 py-3 fw-bold shadow-sm rounded-3 hover-scale" (click)="showForm = true">
                    <i class="fas fa-plus-circle me-2"></i> Yeni Haber Ekle
                </button>
            </div>

            <div class="card border-0 shadow-sm p-4 mb-5 rounded-4 bg-white fade-in" *ngIf="showForm">
                <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-3">
                    <h5 class="fw-bold mb-0 text-primary"><i class="fas fa-edit me-2"></i> {{ isEditing ? 'Haberi D√ºzenle' : 'Yeni Haber' }}</h5>
                    <button class="btn-close" (click)="resetForm()"></button>
                </div>
                <div class="row g-4">
                    <div class="col-lg-8">
                        <div class="mb-4">
                            <label class="form-label fw-bold small text-secondary">BA≈ûLIK</label>
                            <input type="text" [(ngModel)]="newsData.title" class="form-control form-control-lg fw-bold">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold small text-secondary">ƒ∞√áERƒ∞K (Edit√∂r)</label>
                            <div class="bg-white border rounded-3 overflow-hidden">
                                <quill-editor [(ngModel)]="newsData.content" [styles]="{height: '350px'}"></quill-editor>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card bg-light border-0 p-4 rounded-4 h-100">
                            <div class="mb-4">
                                <label class="form-label fw-bold small text-secondary">KATEGORƒ∞</label>
                                <select [(ngModel)]="newsData.category" class="form-select form-select-lg">
                                    <option value="G√úNDEM">G√úNDEM</option>
                                    <option value="EKONOMƒ∞">EKONOMƒ∞</option>
                                    <option value="SPOR">SPOR</option>
                                    <option value="TEKNOLOJƒ∞">TEKNOLOJƒ∞</option>
                                </select>
                            </div>
                            <div class="mb-4">
                                <label class="form-label fw-bold small text-secondary">G√ñRSEL (Kƒ±rpma)</label>
                                <input type="file" #fileInput (change)="onFileSelected($event)" class="d-none" accept="image/*">
                                <div class="image-upload-box bg-white border border-2 border-dashed rounded-4 p-4 text-center cursor-pointer" (click)="fileInput.click()">
                                    <div *ngIf="!selectedFile && !newsData.image">
                                        <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                                        <h6 class="fw-bold text-dark">Resim Se√ß</h6>
                                    </div>
                                    <div [class.d-none]="!selectedFile && !newsData.image">
                                        <img #imageElement class="img-fluid rounded">
                                    </div>
                                </div>
                            </div>
                            <div class="d-grid gap-2 mt-auto">
                                <button (click)="saveNews()" class="btn btn-primary fw-bold py-3">{{ isEditing ? 'G√úNCELLE' : 'YAYINLA' }}</button>
                                <button (click)="resetForm()" class="btn btn-outline-secondary">VAZGE√á</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card border-0 shadow-sm rounded-4 overflow-hidden">
                <table class="table table-hover align-middle mb-0">
                    <thead class="bg-light text-muted small text-uppercase">
                        <tr><th class="ps-4 py-3">G√∂rsel</th><th>Ba≈ülƒ±k</th><th>Kategori</th><th class="text-end pe-4">ƒ∞≈ülemler</th></tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let news of newsList">
                            <td class="ps-4"><img *ngIf="news.image_path" [src]="baseUrl + news.image_path" class="rounded shadow-sm" width="60"></td>
                            <td class="fw-bold">{{ news.title }}</td>
                            <td><span class="badge bg-primary-subtle text-primary">{{ news.category_name }}</span></td>
                            <td class="text-end pe-4">
                                <button (click)="editItem(news, 'news')" class="btn btn-sm btn-light text-warning me-2"><i class="fas fa-edit"></i></button>
                                <button (click)="deleteItem(news.id, 'news')" class="btn btn-sm btn-light text-danger"><i class="fas fa-trash"></i></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div *ngIf="activeTab === 'columnists'" class="fade-in">

    <div class="mb-4">
        <button class="btn btn-info text-white px-4 py-3 fw-bold shadow-sm rounded-3" (click)="showForm = true">
            <i class="fas fa-plus-circle me-2"></i> YENƒ∞ YAZI YAZ
        </button>
    </div>

    <div *ngIf="showForm" class="card border-0 shadow-sm p-4 mb-4 rounded-4 bg-white fade-in">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="fw-bold text-info">
                <img *ngIf="currentUser.image_path" [src]="baseUrl + currentUser.image_path" class="rounded-circle me-2" width="30" height="30">
                {{ currentUser.full_name }} Olarak Yazƒ±yorsunuz
            </h5>
            <button class="btn-close" (click)="resetForm()"></button>
        </div>

        <div class="row g-3">
            <div class="col-12">
                <label class="fw-bold small text-muted">BA≈ûLIK</label>
                <input [(ngModel)]="postData.title" class="form-control form-control-lg fw-bold" placeholder="Yazƒ± Ba≈ülƒ±ƒüƒ±...">
            </div>
            <div class="col-12">
                <label class="fw-bold small text-muted">ƒ∞√áERƒ∞K</label>
                <div class="bg-white border rounded overflow-hidden">
                    <quill-editor [(ngModel)]="postData.content" [styles]="{height: '400px'}"></quill-editor>
                </div>
            </div>
            <div class="col-12 text-end">
                <button (click)="saveColumnPost()" class="btn btn-info text-white btn-lg fw-bold px-5">YAYINLA</button>
            </div>
        </div>
    </div>

    </div>

        <div *ngIf="activeTab === 'slider' || activeTab === 'breaking'" class="fade-in">
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="card p-3 border-warning border-top border-3 h-100">
                        <h6 class="fw-bold text-warning mb-3">YAYINDAKƒ∞LER</h6>
                        <table class="table"><tr *ngFor="let news of (activeTab === 'slider' ? activeSliderNews : activeBreakingNews)"><td><img [src]="baseUrl + news.image_path" width="40"></td><td class="small">{{ news.title }}</td><td><button (click)="toggleNewsStatus(news.id, activeTab === 'slider' ? 'is_slider' : 'is_breaking', false)" class="btn btn-sm btn-outline-danger">√áƒ±kar</button></td></tr></table>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card p-3 border-success border-top border-3 h-100 bg-light">
                        <h6 class="fw-bold text-success mb-3">EKLE</h6>
                        <table class="table"><tr *ngFor="let news of candidateNews"><td class="small">{{ news.title }}</td><td><button (click)="toggleNewsStatus(news.id, activeTab === 'slider' ? 'is_slider' : 'is_breaking', true)" class="btn btn-sm btn-success">Ekle</button></td></tr></table>
                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="activeTab === 'videos'" class="fade-in">
            <div class="card p-4 mb-4 border-0 shadow-sm"><div class="row g-2"><div class="col-md-5"><input [(ngModel)]="videoData.title" class="form-control" placeholder="Video Ba≈ülƒ±ƒüƒ±"></div><div class="col-md-5"><input [(ngModel)]="videoData.url" class="form-control" placeholder="YouTube Linki"></div><div class="col-md-2"><button (click)="saveVideo()" class="btn btn-danger w-100">Ekle</button></div></div></div>
            <div class="row g-3"><div *ngFor="let v of videoList" class="col-md-4"><div class="card h-100 shadow-sm border-0"><iframe [src]="sanitizer.bypassSecurityTrustResourceUrl(v.url)" height="200" frameborder="0" allowfullscreen></iframe><div class="card-body d-flex justify-content-between"><span class="small fw-bold">{{ v.title }}</span><button (click)="deleteItem(v.id, 'videos')" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button></div></div></div></div>
        </div>

        <div *ngIf="activeTab === 'ads'" class="fade-in">
            <div class="card p-4 mb-4 border-0 shadow-sm"><div class="row g-2"><div class="col-md-3"><input [(ngModel)]="adData.title" class="form-control" placeholder="Reklam Adƒ±"></div><div class="col-md-3"><input [(ngModel)]="adData.target_url" class="form-control" placeholder="URL"></div><div class="col-md-2"><select [(ngModel)]="adData.area" class="form-select"><option value="sidebar">Sidebar</option><option value="header">Header</option></select></div><div class="col-md-2"><input type="file" id="adFile" class="form-control"></div><div class="col-md-2"><button (click)="saveAd()" class="btn btn-success w-100">Ekle</button></div></div></div>
            <div class="row g-3"><div *ngFor="let ad of adList" class="col-md-3"><div class="card h-100"><img [src]="baseUrl + ad.image_path" class="card-img-top" style="height: 100px; object-fit: contain;"><div class="card-body"><p class="small fw-bold m-0">{{ ad.title }}</p><button (click)="deleteItem(ad.id, 'ads')" class="btn btn-sm btn-danger float-end"><i class="fas fa-trash"></i></button></div></div></div></div>
        </div>

    </div>
</div>

============================================================
DOSYA YOLU: frontend\src\app\components\admin\dashboard\dashboard.spec.ts
============================================================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { Dashboard } from './dashboard';

describe('Dashboard', () => {
  let component: Dashboard;
  let fixture: ComponentFixture<Dashboard>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [Dashboard]
    })
    .compileComponents();

    fixture = TestBed.createComponent(Dashboard);
    component = fixture.componentInstance;
    await fixture.whenStable();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


============================================================
DOSYA YOLU: frontend\src\app\components\admin\dashboard\dashboard.ts
============================================================
import { Component, OnInit, OnDestroy, ViewChild, ElementRef, ChangeDetectorRef } from '@angular/core';
import { CommonModule } from '@angular/common';
import { HttpClient, HttpHeaders } from '@angular/common/http';
import { RouterModule, Router } from '@angular/router';
import { AuthService } from '../../../services/auth';
import { FormsModule } from '@angular/forms';
import { QuillModule } from 'ngx-quill';
import Cropper from 'cropperjs';
import { DomSanitizer } from '@angular/platform-browser';

@Component({
  selector: 'app-dashboard',
  standalone: true,
  imports: [CommonModule, RouterModule, FormsModule, QuillModule],
  templateUrl: './dashboard.html',
  styleUrls: ['./dashboard.css']
})
export class DashboardComponent implements OnInit, OnDestroy {
  activeTab: string = 'news'; 
  showForm: boolean = false;
  isEditing: boolean = false;
  currentId: number | null = null;
  currentUser: any = null;
  selectedFile: boolean = false;
  
  baseUrl = 'http://localhost:3000'; 
  @ViewChild('imageElement') imageElement!: ElementRef;
  cropper: any; 

  // --- Lƒ∞STELER ---
  newsList: any[] = [];
  activeSliderNews: any[] = [];
  activeBreakingNews: any[] = [];
  videoList: any[] = [];
  adList: any[] = [];
  userList: any[] = []; // Personel Listesi
  columnPostList: any[] = []; // K√∂≈üe Yazƒ±larƒ± Listesi
  candidateNews: any[] = []; 

  // --- FORM DATALARI ---
  newsData = { title: '', category: 'G√úNDEM', content: '', image: null };
  videoData = { title: '', url: '' };
  adData = { title: '', target_url: '', area: 'sidebar', image: null };
  userData = { username: '', password: '', full_name: '', role: 'author', bio: '', image: null };
  
  // G√úNCELLENDƒ∞: Artƒ±k user_id yok, backend token'dan alacak
  postData = { title: '', content: '' }; 

  constructor(
    private authService: AuthService, 
    private router: Router,
    private http: HttpClient,
    private cdr: ChangeDetectorRef,
    public sanitizer: DomSanitizer
  ) {}

  ngOnInit() {
    document.body.classList.add('admin-body');
    this.currentUser = this.authService.getCurrentUser();
    if (!this.currentUser) {
      this.router.navigate(['/login']);
    } else {
      this.getNews();
    }
  }

  ngOnDestroy() { document.body.classList.remove('admin-body'); }
  onLogout() { this.authService.logout(); this.router.navigate(['/login']); }

  // --- SEKME GE√áƒ∞≈ûLERƒ∞ ---
  switchTab(tabName: string) {
    this.activeTab = tabName;
    this.resetForm();
    if (tabName === 'news') this.getNews();
    else if (tabName === 'slider') this.loadSliderEditor();
    else if (tabName === 'breaking') this.loadBreakingEditor();
    else if (tabName === 'videos') this.getVideos();
    else if (tabName === 'ads') this.getAds();
    else if (tabName === 'personnel') this.getUsers();
    else if (tabName === 'columnists') this.getColumnPosts(); // Sadece yazƒ±larƒ± √ßekiyoruz
  }

  // --- 1. HABER ƒ∞≈ûLEMLERƒ∞ ---
  getNews() {
    this.http.get<any>(`${this.baseUrl}/api/news`).subscribe(res => {
        this.newsList = res.news || [];
        this.cdr.detectChanges();
    });
  }

  saveNews() {
     if (!this.newsData.title) { alert("Ba≈ülƒ±k giriniz!"); return; }
     if (!this.isEditing && !this.cropper) { alert("Resim se√ßiniz!"); return; }

     const formData = new FormData();
     formData.append('title', this.newsData.title);
     formData.append('content', this.newsData.content);
     formData.append('category', this.newsData.category);
     const token = localStorage.getItem('token');
     const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);

     if (this.cropper) {
        this.cropper.getCroppedCanvas().toBlob((blob: any) => {
            if (blob) {
                formData.append('image', blob, 'news-image.jpg');
                this.sendRequest(formData, headers, 'news');
            }
        }, 'image/jpeg', 0.8);
     } else { this.sendRequest(formData, headers, 'news'); }
  }

  // --- 2. K√ñ≈ûE YAZISI ƒ∞≈ûLEMLERƒ∞ (G√úNCELLENDƒ∞) ---
  getColumnPosts() {
      this.http.get<any>(`${this.baseUrl}/api/column-posts`).subscribe(res => {
          this.columnPostList = res;
          this.cdr.detectChanges();
      });
  }

  saveColumnPost() {
      if(!this.postData.title) return alert("Yazƒ± ba≈ülƒ±ƒüƒ± girmelisiniz!");
      
      const token = localStorage.getItem('token');
      const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);

      // Backend'e sadece ba≈ülƒ±k ve i√ßerik g√∂nderiyoruz.
      // Backend, 'Authorization' ba≈ülƒ±ƒüƒ±ndaki token'ƒ± √ß√∂z√ºp Yazarƒ±n Kim Olduƒüunu bulacak.
      this.http.post(`${this.baseUrl}/api/column-posts`, this.postData, { headers }).subscribe({
          next: () => {
              alert("Yazƒ±nƒ±z ba≈üarƒ±yla yayƒ±nlandƒ±!"); 
              this.getColumnPosts(); 
              this.resetForm();
          },
          error: (err) => {
              console.error(err);
              alert("Hata: " + (err.error?.message || "Yetkiniz olmayabilir."));
          }
      });
  }

  deleteColumnPost(id: number) {
      if(confirm('Bu yazƒ±yƒ± silmek istediƒüine emin misin?')) {
          const token = localStorage.getItem('token');
          const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);
          
          this.http.delete(`${this.baseUrl}/api/column-posts/${id}`, { headers }).subscribe({
              next: () => this.getColumnPosts(),
              error: (err) => alert(err.error?.message || "Silinemedi.")
          });
      }
  }

  // --- 3. PERSONEL Y√ñNETƒ∞Mƒ∞ ---
  getUsers() {
      this.http.get<any>(`${this.baseUrl}/api/users`).subscribe(res => this.userList = res);
  }

  saveUser() {
      if(!this.userData.username || !this.userData.password) return alert("Kullanƒ±cƒ± adƒ± ve ≈üifre zorunlu!");
      
      const fd = new FormData();
      fd.append('username', this.userData.username);
      fd.append('password', this.userData.password);
      fd.append('full_name', this.userData.full_name);
      fd.append('role', this.userData.role);
      fd.append('bio', this.userData.bio);

      // ƒ∞zinleri (Permissions) role g√∂re otomatik ayarlayabiliriz veya backend halleder.
      // ≈ûimdilik backend 'role'e g√∂re yetki vermiyor, JSON permission bekliyor.
      // Basitlik olsun diye burada elle ekleyelim (Veya backend createAdmin gibi yapmalƒ±ydƒ±):
      // NOT: Bu kƒ±smƒ± backend'de 'userController' i√ßinde halletmek daha g√ºvenli ama 
      // hƒ±zlƒ± √ß√∂z√ºm i√ßin ≈üimdilik 'role' bilgisini g√∂nderiyoruz, backend bunu i≈üleyebilir.
      // Ancak senin 'authController'ƒ±nda login olurken permission kontrol√º var.
      // Yeni eklenen kullanƒ±cƒ±nƒ±n permissions s√ºtunu bo≈ü kalƒ±rsa giri≈ü yapamaz/i≈ülem yapamaz.
      // Bu y√ºzden backend'deki 'addUser' fonksiyonu varsayƒ±lan permission atamalƒ±.
      
      if(this.cropper) {
          this.cropper.getCroppedCanvas().toBlob((blob: any) => {
              fd.append('image', blob, 'avatar.jpg');
              this.http.post(`${this.baseUrl}/api/users`, fd).subscribe(() => {
                  alert("Personel eklendi!"); this.getUsers(); this.resetForm();
              });
          });
      } else {
          this.http.post(`${this.baseUrl}/api/users`, fd).subscribe(() => {
             alert("Personel eklendi!"); this.getUsers(); this.resetForm();
          });
      }
  }

  deleteUser(id: number) {
      if(confirm('Personel silinsin mi?')) this.http.delete(`${this.baseUrl}/api/users/${id}`).subscribe(() => this.getUsers());
  }

  // --- ORTAK ƒ∞STEK G√ñNDERƒ∞Cƒ∞ (Haberler i√ßin) ---
  sendRequest(formData: FormData, headers: HttpHeaders, type: 'news') {
    if (this.isEditing && this.currentId) {
        this.http.put(`${this.baseUrl}/api/news/${this.currentId}`, formData, { headers }).subscribe({
            next: () => { alert('G√ºncellendi!'); this.resetForm(); this.getNews(); },
            error: () => alert("Hata olu≈ütu")
        });
    } else {
        this.http.post(`${this.baseUrl}/api/news`, formData, { headers }).subscribe({
            next: () => { alert('Eklendi!'); this.resetForm(); this.getNews(); },
            error: () => alert("Hata olu≈ütu")
        });
    }
  }

  // --- Dƒ∞ƒûER FONKSƒ∞YONLAR ---
  editItem(item: any, type: 'news') {
    this.isEditing = true;
    this.currentId = item.id;
    this.showForm = true;
    this.newsData = { title: item.title, category: item.category_name, content: item.content, image: null };
    
    if (item.image_path) {
        setTimeout(() => { this.imageElement.nativeElement.src = this.baseUrl + item.image_path; }, 100);
    }
  }

  deleteItem(id: number, type: string) {
      if(confirm('Silinsin mi?')) {
          const token = localStorage.getItem('token');
          const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);
          this.http.delete(`${this.baseUrl}/api/${type}/${id}`, { headers }).subscribe(() => {
            if(type === 'news') this.getNews();
            if(type === 'videos') this.getVideos();
            if(type === 'ads') this.getAds();
          });
      }
  }

  resetForm() {
    this.showForm = false; 
    this.isEditing = false; 
    this.selectedFile = false; 
    this.newsData = { title: '', category: 'G√úNDEM', content: '', image: null };
    this.userData = { username: '', password: '', full_name: '', role: 'author', bio: '', image: null };
    this.postData = { title: '', content: '' }; // ID temizlendi
    if(this.cropper) { this.cropper.destroy(); this.cropper = null; }
    if(this.imageElement) this.imageElement.nativeElement.src = '';
  }

  // --- RESƒ∞M SE√áME (CROPPER) ---
  onFileSelected(event: any) {
    const file = event.target.files[0];
    if (file) {
      this.selectedFile = true;
      const reader = new FileReader();
      reader.onload = (e: any) => {
        this.imageElement.nativeElement.src = e.target.result;
        if (this.cropper) { this.cropper.destroy(); }
        
        // Personel i√ßin kare (1:1), Haber i√ßin 16:9
        const ratio = (this.activeTab === 'personnel') ? 1 : (16 / 9);

        this.cropper = new Cropper(this.imageElement.nativeElement, { 
            aspectRatio: ratio, 
            viewMode: 1, 
            autoCropArea: 1 
        } as any);
      };
      reader.readAsDataURL(file);
    }
  }

  // --- Dƒ∞ƒûERLERƒ∞ (MAN≈ûET, Vƒ∞DEO, REKLAM) ---
  loadSliderEditor() {
    this.http.get<any>(`${this.baseUrl}/api/news?type=slider`).subscribe(res => { this.activeSliderNews = res.news || []; });
    this.loadCandidates('is_slider');
  }
  loadBreakingEditor() {
    this.http.get<any>(`${this.baseUrl}/api/news?type=breaking`).subscribe(res => { this.activeBreakingNews = res.news || []; });
    this.loadCandidates('is_breaking');
  }
  loadCandidates(excludeType: string) {
    this.http.get<any>(`${this.baseUrl}/api/news?limit=50`).subscribe(res => {
        const all = res.news || [];
        this.candidateNews = all.filter((n: any) => n[excludeType] === 0);
        this.cdr.detectChanges();
    });
  }
  toggleNewsStatus(id: number, type: 'is_slider' | 'is_breaking', status: boolean) {
    const value = status ? 1 : 0;
    const token = localStorage.getItem('token');
    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);
    this.http.patch(`${this.baseUrl}/api/news/${id}/toggle`, { field: type, value }, { headers }).subscribe({
        next: () => {
            if (this.activeTab === 'slider') this.loadSliderEditor();
            else if (this.activeTab === 'breaking') this.loadBreakingEditor();
        }
    });
  }
  getVideos() { this.http.get<any>(`${this.baseUrl}/api/videos`).subscribe(res => { this.videoList = res; }); }
  saveVideo() { 
      if(!this.videoData.title || !this.videoData.url) return alert("Eksik");
      this.http.post(`${this.baseUrl}/api/videos`, this.videoData).subscribe(() => { alert("Eklendi"); this.getVideos(); });
  }
  deleteVideo(id: number) { this.http.delete(`${this.baseUrl}/api/videos/${id}`).subscribe(() => this.getVideos()); }

  getAds() { this.http.get<any>(`${this.baseUrl}/api/ads`).subscribe(res => { this.adList = res; }); }
  saveAd() { 
      const input = document.getElementById('adFile') as HTMLInputElement;
      if(input.files && input.files[0]) {
          const fd = new FormData();
          fd.append('image', input.files[0]);
          fd.append('title', this.adData.title);
          fd.append('target_url', this.adData.target_url);
          fd.append('area', this.adData.area);
          this.http.post(`${this.baseUrl}/api/ads`, fd).subscribe(() => { alert("Eklendi"); this.getAds(); });
      }
  }
  deleteAd(id: number) { this.http.delete(`${this.baseUrl}/api/ads/${id}`).subscribe(() => this.getAds()); }
}

============================================================
DOSYA YOLU: frontend\src\app\components\home\home.css
============================================================
/* Logo Kutusu */
.logo-box {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white; 
    width: 50px; height: 50px; 
    display: flex; align-items: center; justify-content: center;
    font-size: 1.8rem; border-radius: 12px;
    box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
}
.brand-title { color: var(--secondary); letter-spacing: -0.5px; }
.brand-subtitle { color: var(--primary); font-weight: 600; letter-spacing: 1px; font-size: 0.75rem; text-transform: uppercase; }

/* Men√º Linkleri */
.nav-link-custom { 
    color: var(--secondary); font-weight: 600; 
    padding: 0 20px; text-transform: uppercase; 
    font-size: 0.85rem; transition: 0.3s; 
    position: relative; display: flex; align-items: center; text-decoration: none;
}
.nav-link-custom:hover { color: var(--primary); }

/* Sosyal Medya Butonlarƒ± */
.social-btn {
    width: 30px; height: 30px; 
    background: rgba(255,255,255,0.1); 
    display: flex; align-items: center; justify-content: center; 
    border-radius: 50%; color: white; transition: 0.2s;
}
.social-btn:hover { background: var(--primary); transform: translateY(-2px); }

/* WhatsApp Butonu */
.whatsapp-float {
    position: fixed; bottom: 25px; left: 25px; 
    background: var(--whatsapp-green); color: white;
    padding: 12px 20px; border-radius: 50px; 
    font-weight: 700; 
    box-shadow: 0 10px 25px rgba(37, 211, 102, 0.4); 
    z-index: 999; text-decoration: none;
    display: flex; align-items: center; transition: 0.3s;
}
.whatsapp-float:hover { transform: scale(1.05); }

/* SON DAKƒ∞KA ETƒ∞KETƒ∞ (Yamuk Kesim - Tek Seferde Tanƒ±mlƒ±) */
.breaking-label {
    background-color: #212529;
    color: white;
    padding-right: 30px !important;
    clip-path: polygon(0 0, 100% 0, 85% 100%, 0% 100%);
    width: fit-content;
    min-width: 160px;
    position: relative;
}
/* Siyah √º√ßgen detayƒ± */
.breaking-label::after { 
    content: ''; position: absolute; right: -20px; top: 0;
    border-top: 48px solid #212529; 
    border-right: 20px solid transparent; 
}

/* KAYAN YAZI */
.marquee-wrapper { white-space: nowrap; }
.marquee-content {
    display: inline-block;
    padding-left: 100%;
    animation: scroll-left 20s linear infinite;
}
@keyframes scroll-left {
    0% { transform: translateX(0); }
    100% { transform: translateX(-100%); }
}

/* Resim Oranƒ± */
.object-fit-cover { object-fit: cover; }

/* Metin Ta≈ümasƒ±nƒ± Engelleme (Sarƒ± Hata Giderildi) */
.line-clamp-2 {
    display: -webkit-box;
    /* autoprefixer: ignore next */
    -webkit-box-orient: vertical; /* Sarƒ± hatanƒ±n sebebi buydu, artƒ±k sorun yok */
    -webkit-line-clamp: 2;
    overflow: hidden;
}

/* Arama Kutusu */
.search-box {
    position: relative; background: #f1f5f9;
    height: 40px; border-radius: 40px; padding: 10px;
    display: flex; align-items: center; transition: 0.4s;
    width: 40px; overflow: hidden;
}
.search-box:hover, .search-box:focus-within {
    width: 250px; background: white;
    border: 1px solid #e2e8f0;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
}
.search-btn {
    color: var(--primary); float: right;
    width: 20px; height: 20px;
    display: flex; justify-content: center; align-items: center;
    text-decoration: none; transition: 0.4s;
}
.search-input {
    border: none; outline: none; background: none;
    float: left; padding: 0; color: #333;
    font-size: 14px; transition: 0.4s;
    line-height: 20px; width: 0px;
}
.search-box:hover .search-input, .search-box:focus-within .search-input {
    width: 200px; padding: 0 10px;
}

============================================================
DOSYA YOLU: frontend\src\app\components\home\home.html
============================================================
<div class="top-bar py-2 d-none d-md-block bg-dark text-white">
    <div class="container d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center gap-3 small">
            <span class="opacity-75">8 ≈ûubat 2026 Pazar</span>
            <span class="opacity-25">|</span>
            
            <span class="fw-bold text-warning d-flex align-items-center" *ngIf="weather$ | async as w; else loadingWeather">
    <i class="fas me-2" [ngClass]="w.icon"></i> 
    Vezirk√∂pr√º {{ w.temp }}¬∞C
</span>

<ng-template #loadingWeather>
    <span class="fw-bold text-warning opacity-50">
        <i class="fas fa-spinner fa-spin me-2"></i> Y√ºkleniyor...
    </span>
</ng-template>
        </div>
        
        <div class="d-flex gap-2">
            <a href="https://www.facebook.com/ulucinardijitalmedya" target="_blank" class="social-btn" title="Facebook"><i class="fab fa-facebook-f"></i></a>
            <a href="https://x.com/ulucinardijitalmedya" target="_blank" class="social-btn" title="X (Twitter)">
    <svg xmlns="http://www.w3.org/2000/svg" height="14" width="14" viewBox="0 0 512 512" fill="white">
        <path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/>
    </svg>
</a>
            <a href="https://www.instagram.com/ulucinardijitalmedya" target="_blank" class="social-btn" title="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="https://www.tiktok.com/@ulucinardijitalmedya" target="_blank" class="social-btn" title="TikTok"><i class="fa-brands fa-tiktok"></i></a>
            <a href="https://www.youtube.com/@ulucinardijitalmedya" target="_blank" class="social-btn" title="YouTube"><i class="fab fa-youtube"></i></a>
        </div>
    </div>
</div>

<header class="py-4 bg-white border-bottom">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-4 text-center text-md-start">
                <a href="/" class="d-inline-flex align-items-center text-decoration-none">
                    <div class="logo-box me-3">N</div>
                    <div class="d-flex flex-column justify-content-center text-start">
                        <span class="h2 fw-bold mb-0 brand-title lh-1">NERƒ∞K</span>
                        <span class="brand-subtitle">Dƒ∞Jƒ∞TAL MEDYA</span>
                    </div>
                </a>
            </div>
            <div class="col-md-8">
                <div class="d-flex align-items-center justify-content-center bg-light border rounded-4 mx-auto" style="height: 90px; max-width: 728px; border-style: dashed !important;">
                    <span class="text-secondary small fw-bold text-uppercase">REKLAM ALANI</span>
                </div>
            </div>
        </div>
    </div>
</header>

<nav class="navbar-custom bg-white shadow-sm sticky-top">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center" style="height: 60px;">
            <div class="d-flex h-100">
                <a href="/" class="nav-link-custom">ANASAYFA</a>
                <a href="#" class="nav-link-custom">G√úNDEM</a>
                <a href="#" class="nav-link-custom">SPOR</a>
            </div>

            <div class="search-box ms-auto me-3 d-none d-md-block">
    <input type="text" class="search-input" placeholder="Haber ara...">
    <a href="#" class="search-btn">
        <i class="fas fa-search"></i>
    </a>
</div>

            <a href="/login" class="btn btn-sm btn-outline-primary ms-3 d-none d-md-block">Giri≈ü</a>
        </div>
    </div>
</nav>

<div class="breaking-news-bar bg-primary text-white overflow-hidden position-relative" style="height: 40px;">
    <div class="container-fluid h-100 p-0 d-flex"> <div class="breaking-label bg-dark px-4 h-100 d-flex align-items-center fw-bold small fst-italic position-relative z-2">
            <span class="spinner-grow spinner-grow-sm text-danger me-2"></span> SON DAKƒ∞KA
        </div>

        <div class="marquee-wrapper w-100 d-flex align-items-center overflow-hidden position-relative">
            <div class="marquee-content fw-bold small">
                {{ breakingNews }}
            </div>
        </div>

    </div>
</div>

<main class="container py-5">
    <div class="row g-5">
        <div class="col-lg-8">
            
            <div *ngIf="sliderNews.length > 0" class="bg-dark rounded-4 mb-5 position-relative overflow-hidden" style="height: 450px;">
                <img [src]="baseUrl + sliderNews[0].image_path" class="w-100 h-100 object-fit-cover" alt="Man≈üet">
                <div class="position-absolute bottom-0 start-0 w-100 p-4" style="background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);">
                    <h2 class="text-white fw-bold mb-1">{{ sliderNews[0].title }}</h2>
                </div>
            </div>

            <div *ngIf="sliderNews.length === 0" class="bg-secondary rounded-4 mb-5 d-flex align-items-center justify-content-center text-white" style="height: 450px;">
                <p>Hen√ºz man≈üet haber girilmedi.</p>
            </div>

            <div class="d-flex align-items-center justify-content-between mb-4 pb-2 border-bottom">
                <h3 class="mb-0 text-secondary border-start border-4 border-primary ps-3">G√ºn√ºn √ñne √áƒ±kanlarƒ±</h3>
            </div>

            <div class="d-flex flex-column gap-4">
                
                <article *ngFor="let news of latestNews" class="bg-white rounded-4 shadow-sm overflow-hidden d-flex flex-column flex-md-row">
                    <div class="col-md-5 position-relative bg-light d-flex align-items-center justify-content-center overflow-hidden" style="min-height: 200px;">
                        <span class="badge bg-primary position-absolute top-0 start-0 m-3 z-1">{{ news.category_name || 'G√ºndem' }}</span>
                        
                        <img *ngIf="news.image_path" [src]="baseUrl + news.image_path" class="w-100 h-100 object-fit-cover position-absolute top-0 start-0">
                        
                        <i *ngIf="!news.image_path" class="fas fa-newspaper fa-3x text-secondary opacity-25"></i>
                    </div>

                    <div class="col-md-7 p-4 d-flex flex-column justify-content-center">
                        <h4 class="fw-bold text-secondary mb-2">{{ news.title }}</h4>
                        <p class="text-muted small mb-3 line-clamp-2">{{ news.summary }}</p>
                        
                        <div class="d-flex align-items-center justify-content-between mt-auto">
                            <span class="small text-muted"><i class="far fa-clock me-1"></i> {{ news.created_at | date:'dd.MM.yyyy' }}</span>
                            <a [routerLink]="['/haber', news.slug]" class="text-primary small fw-bold text-decoration-none cursor-pointer">
                                <i class="fas fa-arrow-right me-1"></i> Haberi Oku
                            </a>
                        </div>
                    </div>
                </article>

            </div>
        </div>

        <div class="col-lg-4">
            <div class="bg-white d-flex align-items-center justify-content-center border rounded-4 mb-4 shadow-sm" style="height: 300px; border-style: dashed !important;">
    <span class="text-secondary small fw-bold">Dƒ∞KEY REKLAM ALANI</span>
</div>

            <div class="bg-white p-4 rounded-4 shadow-sm border-0 mb-5">
    <div class="d-flex align-items-center justify-content-between mb-4 border-bottom pb-2">
        <h5 class="fw-bold mb-0 text-secondary border-start border-4 border-primary ps-3">K√∂≈üe Yazarlarƒ±</h5>
    </div>

    <div class="text-center text-muted py-5 bg-light rounded-3 border border-light-subtle">
        <i class="fas fa-feather-alt fa-2x mb-3 opacity-50"></i>
        <p class="mb-0 small fw-bold">Hen√ºz k√∂≈üe yazƒ±sƒ± girilmedi.</p>
    </div>

    </div>
        </div>
    </div>
</main>
<footer class="bg-white border-top py-5 mt-auto">
    <div class="container text-center">
        
        <div class="d-flex flex-column align-items-center justify-content-center mb-4">
            <div class="logo-box mb-3" style="width: 60px; height: 60px; font-size: 2rem;">N</div>
            <h3 class="fw-bold text-secondary mb-0">NERƒ∞K</h3>
            <span class="text-primary fw-bold small letter-spacing-2" style="letter-spacing: 3px;">Dƒ∞Jƒ∞TAL MEDYA</span>
        </div>

        <p class="text-muted small col-md-6 mx-auto mb-4">
            Vezirk√∂pr√º'n√ºn en g√ºncel, en hƒ±zlƒ± ve en tarafsƒ±z dijital haber platformu.
        </p>

        <div class="d-flex justify-content-center gap-3 mb-4">
            <a href="https://www.facebook.com/ulucinardijitalmedya" class="btn btn-light btn-sm rounded-circle text-secondary shadow-sm"><i class="fab fa-facebook-f"></i></a>
            <a href="https://x.com/ulucinardijitalmedya" class="btn btn-light btn-sm rounded-circle text-secondary shadow-sm"><svg xmlns="http://www.w3.org/2000/svg" height="14" width="14" viewBox="0 0 512 512" fill="#6c757d">
        <path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/>
    </svg></a>
            <a href="https://www.instagram.com/ulucinardijitalmedya" class="btn btn-light btn-sm rounded-circle text-secondary shadow-sm"><i class="fab fa-instagram"></i></a>
            <a href="https://www.tiktok.com/@ulucinardijitalmedya" class="btn btn-light btn-sm rounded-circle text-secondary shadow-sm"><i class="fa-brands fa-tiktok"></i></a>
            <a href="https://www.youtube.com/@ulucinardijitalmedya" class="btn btn-light btn-sm rounded-circle text-secondary shadow-sm"><i class="fab fa-youtube"></i></a>
        </div>

        <div class="border-top pt-4">
            <p class="small text-muted mb-0">
                &copy; 2026 Nerik Dijital Medya. T√ºm Haklarƒ± Saklƒ±dƒ±r.
            </p>
        </div>
    </div>
</footer>

<a href="https://wa.me/905xxxxxxxxx" class="whatsapp-float" target="_blank">
    <i class="fab fa-whatsapp fa-lg"></i>
    <span class="d-none d-md-inline ms-2">ƒ∞hbar Hattƒ±</span>
</a>

============================================================
DOSYA YOLU: frontend\src\app\components\home\home.spec.ts
============================================================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { Home } from './home';

describe('Home', () => {
  let component: Home;
  let fixture: ComponentFixture<Home>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [Home]
    })
    .compileComponents();

    fixture = TestBed.createComponent(Home);
    component = fixture.componentInstance;
    await fixture.whenStable();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


============================================================
DOSYA YOLU: frontend\src\app\components\home\home.ts
============================================================
import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common'; // AsyncPipe bunun i√ßinde
import { HttpClient } from '@angular/common/http';
import { NewsService } from '../../services/news';
import { Observable, map, catchError, of } from 'rxjs'; // Gerekli k√ºt√ºphaneler
import { RouterModule } from '@angular/router'; // RouterLink i√ßin

@Component({
  selector: 'app-home',
  standalone: true,
  imports: [CommonModule, RouterModule],
  templateUrl: './home.html',
  styleUrls: ['./home.css']
})
export class HomeComponent implements OnInit {
  latestNews: any[] = [];
  sliderNews: any[] = [];
  breakingNews: string = '';
  baseUrl = 'http://localhost:3000';
  
  // HTML'in beklediƒüi "weather$" yayƒ±nƒ± burada tanƒ±mlƒ±yoruz!
  weather$!: Observable<{ temp: string, icon: string }>;

  constructor(
    private newsService: NewsService,
    private http: HttpClient
  ) {}

  ngOnInit() {
    this.getNews();
    
    // URL (Cache sorunu olmasƒ±n diye sonuna zaman ekliyoruz)
    const url = `https://api.open-meteo.com/v1/forecast?latitude=41.1436&longitude=35.4552&current_weather=true&t=${Date.now()}`;

    // Yayƒ±nƒ± ba≈ülatƒ±yoruz
    this.weather$ = this.http.get(url).pipe(
      map((res: any) => {
        // Veri geldiƒüinde i≈üle
        if (res && res.current_weather) {
          return {
            temp: Math.round(res.current_weather.temperature).toString(),
            icon: this.getWeatherIconClass(res.current_weather.weathercode)
          };
        }
        return { temp: '--', icon: 'fa-sun' }; // Bo≈ü gelirse
      }),
      catchError(err => {
        console.error('Hava durumu hatasƒ±:', err);
        return of({ temp: '!!', icon: 'fa-exclamation-triangle' }); // Hata olursa
      })
    );
  }

  getNews() {
    this.newsService.getAllNews().subscribe({
      next: (response) => {
        const news = response.news || [];
        this.sliderNews = news.filter((n: any) => n.is_slider);
        const breaking = news.find((n: any) => n.is_breaking);
        this.breakingNews = breaking ? breaking.title : 'Vezirk√∂pr√º\'den en g√ºncel haberler...';
        this.latestNews = news; 
      },
      error: (err) => console.error(err)
    });
  }

  getWeatherIconClass(code: number): string {
    if (code === 0) return 'fa-sun';
    if (code >= 1 && code <= 3) return 'fa-cloud-sun';
    if (code >= 45 && code <= 48) return 'fa-smog';
    if (code >= 51 && code <= 67) return 'fa-cloud-rain';
    if (code >= 71 && code <= 77) return 'fa-snowflake';
    if (code >= 80 && code <= 82) return 'fa-cloud-showers-heavy';
    if (code >= 95) return 'fa-bolt';
    return 'fa-cloud';
  }
}

============================================================
DOSYA YOLU: frontend\src\app\components\login\login.css
============================================================
.login-page {
    background-color: #1D3557; /* Arkada≈üƒ±nƒ±n se√ßtiƒüi renk */
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
}

.login-card {
    background: white;
    padding: 40px;
    border-radius: 15px;
    width: 100%;
    max-width: 400px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}

input.form-control {
    padding: 12px;
    background-color: #f8f9fa;
    border: 2px solid transparent;
}

input.form-control:focus {
    border-color: #1D3557;
    box-shadow: none;
}

============================================================
DOSYA YOLU: frontend\src\app\components\login\login.html
============================================================
<div class="login-page">
    <div class="login-card shadow text-center">
        <h3 class="fw-bold mb-4">Nerik Y√∂netici Giri≈üi</h3>
        
        <div class="mb-3">
            <input type="text" [(ngModel)]="username" class="form-control" placeholder="Kullanƒ±cƒ± Adƒ±">
        </div>

        <div class="mb-3">
            <input type="password" [(ngModel)]="password" class="form-control" placeholder="≈ûifre">
        </div>

        <button (click)="onLogin()" class="btn btn-danger w-100 py-2 fw-bold">
            <i class="fa fa-sign-in me-2"></i> Giri≈ü Yap
        </button>

        <div *ngIf="errorMessage" class="alert alert-danger mt-3 small">
            {{ errorMessage }}
        </div>
    </div>
</div>

============================================================
DOSYA YOLU: frontend\src\app\components\login\login.spec.ts
============================================================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { Login } from './login';

describe('Login', () => {
  let component: Login;
  let fixture: ComponentFixture<Login>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [Login]
    })
    .compileComponents();

    fixture = TestBed.createComponent(Login);
    component = fixture.componentInstance;
    await fixture.whenStable();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


============================================================
DOSYA YOLU: frontend\src\app\components\login\login.ts
============================================================
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { AuthService } from '../../services/auth';
import { Router } from '@angular/router';

@Component({
  selector: 'app-login',
  standalone: true,
  imports: [CommonModule, FormsModule],
  templateUrl: './login.html',
  styleUrls: ['./login.css']
})
export class LoginComponent {
  username = '';
  password = '';
  errorMessage = '';

  constructor(private authService: AuthService, private router: Router) {}

  onLogin() {
    if(!this.username || !this.password) {
      this.errorMessage = "L√ºtfen t√ºm alanlarƒ± doldurun!";
      return;
    }

    const loginData = { username: this.username, password: this.password };

    this.authService.login(loginData).subscribe({
      next: (res) => {
        alert("Giri≈ü Ba≈üarƒ±lƒ±: " + res.user.full_name);
        this.router.navigate(['/admin']); // Giri≈ü yapƒ±nca anasayfaya at
      },
      error: (err) => {
        console.error(err);
        this.errorMessage = "Kullanƒ±cƒ± adƒ± veya ≈üifre hatalƒ±!";
      }
    });
  }
}

============================================================
DOSYA YOLU: frontend\src\app\components\news-detail\news-detail.css
============================================================
[DOSYA BO≈û]

============================================================
DOSYA YOLU: frontend\src\app\components\news-detail\news-detail.html
============================================================
<div class="container py-5">
    
    <div *ngIf="loading" class="text-center py-5">
        <div class="spinner-border text-primary" role="status"></div>
        <p class="mt-2 text-muted">Haber y√ºkleniyor...</p>
    </div>

    <div *ngIf="!loading && news" class="row justify-content-center fade-in">
        <div class="col-lg-9">
            
            <div class="mb-4">
                <a routerLink="/" class="btn btn-outline-secondary btn-sm rounded-pill px-3 shadow-sm hover-scale">
                    <i class="fas fa-arrow-left me-2"></i> Anasayfaya D√∂n
                </a>
            </div>

            <div class="d-flex align-items-center gap-3 mb-3">
                <span class="badge bg-primary px-3 py-2">{{ news.category_name || 'G√ºndem' }}</span>
                <span class="text-muted small"><i class="far fa-clock me-1"></i> {{ news.created_at | date:'dd.MM.yyyy HH:mm' }}</span>
                <span class="text-muted small"><i class="far fa-eye me-1"></i> {{ news.view_count }} okuma</span>
            </div>

            <h1 class="fw-bold text-dark mb-4 display-6">{{ news.title }}</h1>

            <p class="lead fw-bold text-secondary mb-4">{{ news.summary }}</p>

            <div class="mb-5 rounded-4 overflow-hidden shadow-sm position-relative">
                <img *ngIf="news.image_path" [src]="baseUrl + news.image_path" class="w-100 object-fit-cover" style="max-height: 500px;" alt="{{ news.title }}">
            </div>

            <div class="news-content fs-5 text-dark lh-lg" [innerHTML]="safeContent"></div>

            <div class="mt-5 p-4 bg-light rounded-4 border border-light-subtle d-flex align-items-center gap-3">
                <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center fs-4 fw-bold" style="width: 50px; height: 50px;">
                    {{ news.author_name?.charAt(0) || 'A' }}
                </div>
                <div>
                    <span class="d-block small text-muted text-uppercase fw-bold">Haber Edit√∂r√º</span>
                    <span class="fw-bold text-dark">{{ news.author_name || 'Edit√∂r' }}</span>
                </div>
            </div>

        </div>
    </div>

    <div *ngIf="!loading && !news" class="text-center py-5">
        <h3 class="fw-bold text-secondary">Haber Bulunamadƒ±</h3>
        <a routerLink="/" class="btn btn-primary mt-3">Anasayfaya D√∂n</a>
    </div>
</div>

============================================================
DOSYA YOLU: frontend\src\app\components\news-detail\news-detail.spec.ts
============================================================
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { NewsDetail } from './news-detail';

describe('NewsDetail', () => {
  let component: NewsDetail;
  let fixture: ComponentFixture<NewsDetail>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [NewsDetail]
    })
    .compileComponents();

    fixture = TestBed.createComponent(NewsDetail);
    component = fixture.componentInstance;
    await fixture.whenStable();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


============================================================
DOSYA YOLU: frontend\src\app\components\news-detail\news-detail.ts
============================================================
import { Component, OnInit, ChangeDetectorRef } from '@angular/core'; // ChangeDetectorRef eklendi
import { CommonModule } from '@angular/common';
import { ActivatedRoute, RouterModule } from '@angular/router';
import { NewsService } from '../../services/news';
import { DomSanitizer, SafeHtml } from '@angular/platform-browser';

@Component({
  selector: 'app-news-detail',
  standalone: true,
  imports: [CommonModule, RouterModule],
  templateUrl: './news-detail.html',
  styleUrls: ['./news-detail.css']
})
export class NewsDetailComponent implements OnInit {
  news: any = null;
  safeContent: SafeHtml = ''; 
  baseUrl = 'http://localhost:3000';
  loading = true; // Ba≈ülangƒ±√ßta y√ºkleniyor

  constructor(
    private route: ActivatedRoute,
    private newsService: NewsService,
    private sanitizer: DomSanitizer,
    private cdr: ChangeDetectorRef // Dedektif i≈ü ba≈üƒ±nda
  ) {}

  ngOnInit() {
    this.route.paramMap.subscribe(params => {
      const slug = params.get('slug');
      console.log("üîó URL'den gelen slug:", slug); // Konsolda bunu g√∂r
      
      if (slug) {
        this.loadNews(slug);
      } else {
        this.loading = false;
        this.cdr.detectChanges();
      }
    });
  }

  loadNews(slug: string) {
    this.loading = true;
    
    this.newsService.getNewsBySlug(slug).subscribe({
      next: (data) => {
        console.log("‚úÖ Haber Sunucudan Geldi:", data);
        this.news = data;
        
        // HTML ƒ∞√ßeriƒüini temizle/g√ºvenli yap
        if (this.news.content) {
             this.safeContent = this.sanitizer.bypassSecurityTrustHtml(this.news.content);
        }

        this.loading = false; // Y√ºkleme bitti
        this.cdr.detectChanges(); // ‚ö° EKRANI ZORLA YENƒ∞LE
      },
      error: (err) => {
        console.error('‚ùå Haber √áekme Hatasƒ±:', err);
        this.loading = false; // Hata olsa bile y√ºklemeyi bitir
        this.cdr.detectChanges(); // ‚ö° EKRANI ZORLA YENƒ∞LE
      }
    });
  }
}

============================================================
DOSYA YOLU: frontend\src\app\guards\auth-guard.spec.ts
============================================================
import { TestBed } from '@angular/core/testing';
import { CanActivateFn } from '@angular/router';

import { authGuard } from './auth-guard';

describe('authGuard', () => {
  const executeGuard: CanActivateFn = (...guardParameters) => 
      TestBed.runInInjectionContext(() => authGuard(...guardParameters));

  beforeEach(() => {
    TestBed.configureTestingModule({});
  });

  it('should be created', () => {
    expect(executeGuard).toBeTruthy();
  });
});


============================================================
DOSYA YOLU: frontend\src\app\guards\auth-guard.ts
============================================================
import { inject } from '@angular/core';
import { Router, CanActivateFn } from '@angular/router';

export const authGuard: CanActivateFn = () => {
  const router = inject(Router);
  
  // Tarayƒ±cƒ± tarafƒ±ndaysak (SSR hatasƒ± almamak i√ßin) kontrol et
  if (typeof window !== 'undefined') {
    const token = localStorage.getItem('token');
    
    if (token) {
      return true; // Token varsa admin paneline girebilir
    }
  }

  // Token yoksa kullanƒ±cƒ±yƒ± login sayfasƒ±na fƒ±rlat
  router.navigate(['/login']);
  return false;
};

============================================================
DOSYA YOLU: frontend\src\app\services\auth.spec.ts
============================================================
import { TestBed } from '@angular/core/testing';

import { Auth } from './auth';

describe('Auth', () => {
  let service: Auth;

  beforeEach(() => {
    TestBed.configureTestingModule({});
    service = TestBed.inject(Auth);
  });

  it('should be created', () => {
    expect(service).toBeTruthy();
  });
});


============================================================
DOSYA YOLU: frontend\src\app\services\auth.ts
============================================================
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { BehaviorSubject, tap } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class AuthService {
  private apiUrl = 'http://localhost:3000/api/auth';
  private isLoggedInSubject = new BehaviorSubject<boolean>(false);
  isLoggedIn$ = this.isLoggedInSubject.asObservable();

  constructor(private http: HttpClient) { 
    const token = localStorage.getItem('token');
    if(token) this.isLoggedInSubject.next(true);
  }

  login(data: any) {
    // API adresi: http://localhost:3000/api/auth/login
    return this.http.post<any>(`${this.apiUrl}/login`, data).pipe(
      tap(response => {
        // Token'ƒ± kaydet
        localStorage.setItem('token', response.token);
        // Kullanƒ±cƒ± bilgisini kaydet
        localStorage.setItem('user', JSON.stringify(response.user));
        // Giri≈ü yapƒ±ldƒ± bilgisini yay
        this.isLoggedInSubject.next(true);
      })
    );
  }

  logout() {
    localStorage.removeItem('token');
    localStorage.removeItem('user');
    this.isLoggedInSubject.next(false);
  }

  getToken() {
    return localStorage.getItem('token');
  }

  getCurrentUser() {
    const user = localStorage.getItem('user');
    // JSON formatƒ±ndaki veriyi nesneye √ßevirip geri d√∂nd√ºr√ºyoruz
    return user ? JSON.parse(user) : null;
  }
}

============================================================
DOSYA YOLU: frontend\src\app\services\news.spec.ts
============================================================
import { TestBed } from '@angular/core/testing';

import { News } from './news';

describe('News', () => {
  let service: News;

  beforeEach(() => {
    TestBed.configureTestingModule({});
    service = TestBed.inject(News);
  });

  it('should be created', () => {
    expect(service).toBeTruthy();
  });
});


============================================================
DOSYA YOLU: frontend\src\app\services\news.ts
============================================================
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class NewsService {
  private apiUrl = 'http://localhost:3000/api/news'; // Backend adresi

  constructor(private http: HttpClient) { }

  // T√ºm haberleri getirir
  getAllNews(page: number = 1): Observable<any> {
    return this.http.get<any>(`${this.apiUrl}?page=${page}`);
  }

  // Tek bir haberin detayƒ±nƒ± getirir (ƒ∞leride lazƒ±m olacak)
  getNewsBySlug(slug: string): Observable<any> {
    return this.http.get<any>(`${this.apiUrl}/${slug}`);
  }
}
